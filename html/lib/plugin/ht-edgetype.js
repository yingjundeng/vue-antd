!function(E){"use strict";var J="ht",I=E[J],x=Math,R=x.max,s=x.min,X=x.abs,v=x.atan2,n=(x.cos,x.sin,x.ceil),$=I.Default,j=$.getInternal(),T=I.List,u=j.Mat,Y=j.getNodeRect,t=j.intersectionLineRect,V=$.getDistance,P=$.setEdgeType,z="left",L="right",o="top",C="bottom",S="edge.type",e="edge.gap",F="edge.center",y="edge.extend",r=function(F,t){return Y(F,t).width},B=function(B,H){return Y(B,H).height},O=function(X,G){return j.getEdgeHostPosition(X,G,"source")},M=function(w,d){return j.getEdgeHostPosition(w,d,"target")},g=function(b,h){var B=b.s(S),x=b.getEdgeGroup();if(x){var d=0;if(x.eachSiblingEdge(function(P){h.isVisible(P)&&P.s(S)==B&&d++}),d>1)return b.s(e)*(d-1)/2}return 0},D=function(g,L){var M=g.s(S),t=g.isLooped();if(!g.getEdgeGroup())return t?g.s(e):0;var F,P=0,I=0,T=0;return g.getEdgeGroup().getSiblings().each(function(f){f.each(function(v){if(v._40I===g._40I&&v.s(S)==M&&L.isVisible(v)){var d=v.s(e);F?(I+=T/2+d/2,T=d):(F=v,T=d),v===g&&(P=I)}})}),t?I-P+T:P-I/2},h=function(E,s){var y=s.s("edge.corner.radius");return $.toRoundedCorner(E,y)};j.addMethod(I.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),P("boundary",function(r,B,C,K){K||(B=-B);var G,_=O(C,r),I=M(C,r),n=Y(C,r._40I),f=Y(C,r._41I),l=new u(v(I.y-_.y,I.x-_.x)),R=V(_,I),w=_.x,i=_.y;return G=l.tf(0,B),_={x:G.x+w,y:G.y+i},G=l.tf(R,B),I={x:G.x+w,y:G.y+i},G=t(_,I,n),G&&(_={x:G[0],y:G[1]}),G=t(_,I,f),G&&(I={x:G[0],y:G[1]}),{points:new T([_,I])}}),P("ripple",function($,K,U,W){W||(K=-K);var C=O(U,$),B=M(U,$),J=V(C,B),L=s($.s("edge.offset"),J/2),E=$.s("edge.ripple.size"),k=$.s("edge.ripple.length"),I=$.s("edge.ripple.both"),D=$.s(F),w=$.s("edge.ripple.elevation"),p=new T,h=$.s("edge.ripple.straight")?null:new T,d=new u(v(B.y-C.y,B.x-C.x));W||(w=-w),J-=2*L,k>0&&(E=n(J/k));var a=J/E;h&&h.add(1);for(var x=0;E>x;x++)h&&h.add(3),0===x?p.add({x:L+a*x,y:D?0:K}):p.add({x:L+a*x,y:K}),p.add({x:L+a*x+a/2,y:w+K}),I&&(w=-w);for(p.add({x:L+J,y:D?0:K}),x=0;x<p.size();x++){var R=d.tf(p.get(x));R.x+=C.x,R.y+=C.y,p.set(x,R)}return{points:p,segments:h}}),P("h.v",function(m,l,U){l=D(m,U);var X=new T,b=m.s(F),A=O(U,m),C=A.x,Y=A.y,R=M(U,m),H=R.x,N=R.y,g=m._40I instanceof I.Edge,P=m._41I instanceof I.Edge,z=0,d=0,u=H-C,y=N-Y;return b||(z=g?0:r(U,m._40I)/2,d=P?0:B(U,m._41I)/2),u>=0&&0>=y?(X.add({x:C+z,y:Y+l}),X.add({x:H+l,y:Y+l}),X.add({x:H+l,y:N+d})):0>=u&&y>=0?(X.add({x:C-z,y:Y+l}),X.add({x:H+l,y:Y+l}),X.add({x:H+l,y:N-d})):u>=0&&y>=0?(X.add({x:C+z,y:Y+l}),X.add({x:H-l,y:Y+l}),X.add({x:H-l,y:N-d})):(X.add({x:C-z,y:Y+l}),X.add({x:H-l,y:Y+l}),X.add({x:H-l,y:N+d})),h(X,m)}),P("v.h",function(g,a,l){a=D(g,l);var W=new T,N=g.s(F),x=O(l,g),J=x.x,t=x.y,s=M(l,g),u=s.x,U=s.y,S=g._40I instanceof I.Edge,e=g._41I instanceof I.Edge,o=0,n=0,C=u-J,m=U-t;return N||(o=e?0:r(l,g._41I)/2,n=S?0:B(l,g._40I)/2),C>=0&&0>=m?(W.add({x:J+a,y:t-n}),W.add({x:J+a,y:U+a}),W.add({x:u-o,y:U+a})):0>=C&&m>=0?(W.add({x:J+a,y:t+n}),W.add({x:J+a,y:U+a}),W.add({x:u+o,y:U+a})):C>=0&&m>=0?(W.add({x:J-a,y:t+n}),W.add({x:J-a,y:U+a}),W.add({x:u-o,y:U+a})):(W.add({x:J-a,y:t-n}),W.add({x:J-a,y:U+a}),W.add({x:u+o,y:U+a})),h(W,g)}),P("ortho",function(y,$,t){var x=new T,N=y.s(F),G=y.s("edge.ortho"),c=y._40I,f=y._41I,s=O(t,y),E=s.x,i=s.y,b=M(t,y),w=b.x,H=b.y,q=w-E,Z=H-i,e=c instanceof I.Edge,g=f instanceof I.Edge,A=N||e?0:r(t,c)/2,P=N||e?0:B(t,c)/2,u=N||g?0:r(t,f)/2,J=N||g?0:B(t,f)/2,D=(q-(A+u)*(q>0?1:-1))*G,Q=(Z-(P+J)*(Z>0?1:-1))*G;return X(q)<X(Z)?q>=0&&0>=Z?(x.add({x:E+$,y:i-P}),x.add({x:E+$,y:i+Q+$-P}),x.add({x:w+$,y:i+Q+$-P}),x.add({x:w+$,y:H+J})):0>=q&&Z>=0?(x.add({x:E+$,y:i+P}),x.add({x:E+$,y:i+Q+$+P}),x.add({x:w+$,y:i+Q+$+P}),x.add({x:w+$,y:H-J})):q>=0&&Z>=0?(x.add({x:E+$,y:i+P}),x.add({x:E+$,y:i+Q-$+P}),x.add({x:w+$,y:i+Q-$+P}),x.add({x:w+$,y:H-J})):(x.add({x:E+$,y:i-P}),x.add({x:E+$,y:i+Q-$-P}),x.add({x:w+$,y:i+Q-$-P}),x.add({x:w+$,y:H+J})):q>=0&&0>=Z?(x.add({x:E+A,y:i+$}),x.add({x:E+D+$+A,y:i+$}),x.add({x:E+D+$+A,y:H+$}),x.add({x:w-u,y:H+$})):0>=q&&Z>=0?(x.add({x:E-A,y:i+$}),x.add({x:E+D+$-A,y:i+$}),x.add({x:E+D+$-A,y:H+$}),x.add({x:w+u,y:H+$})):q>=0&&Z>=0?(x.add({x:E+A,y:i+$}),x.add({x:E+D-$+A,y:i+$}),x.add({x:E+D-$+A,y:H+$}),x.add({x:w-u,y:H+$})):(x.add({x:E-A,y:i+$}),x.add({x:E+D-$-A,y:i+$}),x.add({x:E+D-$-A,y:H+$}),x.add({x:w+u,y:H+$})),h(x,y)}),P("flex",function(G,N,u){var D=new T,y=G.s("edge.flex")+g(G,u),L=G.s(F),_=G._40I,J=G._41I,l=O(u,G),b=l.x,s=l.y,C=M(u,G),q=C.x,k=C.y,Y=_ instanceof I.Edge,j=J instanceof I.Edge,W=q-b,Z=k-s,H=L||Y?0:r(u,_)/2,R=L||Y?0:B(u,_)/2,E=L||j?0:r(u,J)/2,V=L||j?0:B(u,J)/2,f=W>0?y:-y,p=Z>0?y:-y;return X(W)<X(Z)?W>=0&&0>=Z?(D.add({x:b+N,y:s-R}),D.add({x:b+N,y:s+p+N-R}),D.add({x:q+N,y:k-p+N+V}),D.add({x:q+N,y:k+V})):0>=W&&Z>=0?(D.add({x:b+N,y:s+R}),D.add({x:b+N,y:s+p+N+R}),D.add({x:q+N,y:k-p+N-V}),D.add({x:q+N,y:k-V})):W>=0&&Z>=0?(D.add({x:b+N,y:s+R}),D.add({x:b+N,y:s+p-N+R}),D.add({x:q+N,y:k-p-N-V}),D.add({x:q+N,y:k-V})):(D.add({x:b+N,y:s-R}),D.add({x:b+N,y:s+p-N-R}),D.add({x:q+N,y:k-p-N+V}),D.add({x:q+N,y:k+V})):W>=0&&0>=Z?(D.add({x:b+H,y:s+N}),D.add({x:b+f+N+H,y:s+N}),D.add({x:q-f+N-E,y:k+N}),D.add({x:q-E,y:k+N})):0>=W&&Z>=0?(D.add({x:b-H,y:s+N}),D.add({x:b+f+N-H,y:s+N}),D.add({x:q-f+N+E,y:k+N}),D.add({x:q+E,y:k+N})):W>=0&&Z>=0?(D.add({x:b+H,y:s+N}),D.add({x:b+f-N+H,y:s+N}),D.add({x:q-f-N-E,y:k+N}),D.add({x:q-E,y:k+N})):(D.add({x:b-H,y:s+N}),D.add({x:b+f-N-H,y:s+N}),D.add({x:q-f-N+E,y:k+N}),D.add({x:q+E,y:k+N})),h(D,G)}),P("extend.east",function(f,E,_){var B=new T,i=f.s(y)+g(f,_),P=f.s(F),W=O(_,f),N=f._40I instanceof I.Edge,A=f._41I instanceof I.Edge,K=W.x+(P||N?0:r(_,f._40I)/2),H=W.y,C=M(_,f),$=C.x+(P||A?0:r(_,f._41I)/2),a=C.y,n=R(K,$)+i;return H>a?(B.add({x:K,y:H+E}),B.add({x:n+E,y:H+E}),B.add({x:n+E,y:a-E}),B.add({x:$,y:a-E})):(B.add({x:K,y:H-E}),B.add({x:n+E,y:H-E}),B.add({x:n+E,y:a+E}),B.add({x:$,y:a+E})),h(B,f)}),P("extend.west",function(k,q,$){var L=new T,U=k.s(y)+g(k,$),V=k.s(F),x=k._40I instanceof I.Edge,D=k._41I instanceof I.Edge,X=O($,k),E=X.x-(V||x?0:r($,k._40I)/2),z=X.y,Q=M($,k),J=Q.x-(V||D?0:r($,k._41I)/2),e=Q.y,H=s(E,J)-U;return z>e?(L.add({x:E,y:z+q}),L.add({x:H-q,y:z+q}),L.add({x:H-q,y:e-q}),L.add({x:J,y:e-q})):(L.add({x:E,y:z-q}),L.add({x:H-q,y:z-q}),L.add({x:H-q,y:e+q}),L.add({x:J,y:e+q})),h(L,k)}),P("extend.north",function(x,L,t){var b=new T,a=x.s(y)+g(x,t),m=x.s(F),Q=x._40I instanceof I.Edge,N=x._41I instanceof I.Edge,S=O(t,x),w=S.x,_=S.y-(m||Q?0:B(t,x._40I)/2),q=M(t,x),p=q.x,d=q.y-(m||N?0:B(t,x._41I)/2),P=s(_,d)-a;return w>p?(b.add({y:_,x:w+L}),b.add({y:P-L,x:w+L}),b.add({y:P-L,x:p-L}),b.add({y:d,x:p-L})):(b.add({y:_,x:w-L}),b.add({y:P-L,x:w-L}),b.add({y:P-L,x:p+L}),b.add({y:d,x:p+L})),h(b,x)}),P("extend.south",function(N,Z,J){var U=new T,u=N.s(y)+g(N,J),k=N.s(F),Q=N._40I instanceof I.Edge,G=N._41I instanceof I.Edge,E=O(J,N),q=E.x,m=E.y+(k||Q?0:B(J,N._40I)/2),o=M(J,N),K=o.x,$=o.y+(k||G?0:B(J,N._41I)/2),P=R(m,$)+u;return q>K?(U.add({y:m,x:q+Z}),U.add({y:P+Z,x:q+Z}),U.add({y:P+Z,x:K-Z}),U.add({y:$,x:K-Z})):(U.add({y:m,x:q-Z}),U.add({y:P+Z,x:q-Z}),U.add({y:P+Z,x:K+Z}),U.add({y:$,x:K+Z})),h(U,N)});var W=function(b,_,D,A,n){if(A.sort(function(Y,H){var i=Y.getSourceAgent()===_?Y.getTargetAgent():Y.getSourceAgent(),f=H.getSourceAgent()===_?H.getTargetAgent():H.getSourceAgent(),O=i.p(),E=f.p();if(D===z||D===L){if(O.y>E.y)return 1;if(O.y<E.y)return-1}else{if(O.x>E.x)return 1;if(O.x<E.x)return-1}return $.sortFunc(Y.getId(),H.getId())}),n){for(var p,B,x,R=b.getSourceAgent(),F=b.getTargetAgent(),W=0;W<A.size();W++){var H=A.get(W);H.getSourceAgent()===R&&H.getTargetAgent()===F||H.getTargetAgent()===R&&H.getSourceAgent()===F?(B||(B=new T),B.add(H,0)):B?(x||(x=new T),x.add(H)):(p||(p=new T),p.add(H))}A.clear(),p&&A.addAll(p),B&&A.addAll(B),x&&A.addAll(x)}var G=A.indexOf(b),I=A.size(),r=b.s(e);return{side:D,index:G,size:I,offset:-r*(I-1)/2+r*G}},p=function(c,T,h,a,l){var V=T.s(S);return W(T,h,a,h.getAgentEdges().toList(function(i){return c.isVisible(i)&&i.s(S)===V}),l)},H=function(I,r){var q=I.getSourceAgent()===r?I.getTargetAgent():I.getSourceAgent(),_=r.p(),s=q.p(),p=s.x-_.x,J=s.y-_.y;return p>0&&X(J)<=p?L:0>p&&X(J)<=-p?z:J>0&&X(p)<=J?C:o},A=function(K,Y,b){var m=Y.s(S),F=H(Y,b);return W(Y,b,F,b.getAgentEdges().toList(function(L){return K.isVisible(L)&&L.s(S)===m&&H(L,b)===F}))},d=function(M,N){var e=M.getSourceAgent()===N,r=e?M.getTargetAgent():M.getSourceAgent(),I=N.p(),n=r.p();return e?I.y>n.y?o:C:I.x<n.x?L:z},k=function(g,K,e){var V=K.s(S),J=d(K,e);return W(K,e,J,e.getAgentEdges().toList(function(K){return g.isVisible(K)&&K.s(S)===V&&d(K,e)===J}),J===L||J===C)},Z=function(G,M){var k=G.getSourceAgent()===M,W=k?G.getTargetAgent():G.getSourceAgent(),p=M.p(),B=W.p();return k?p.x<B.x?L:z:p.y>B.y?o:C},l=function(_,m,H){var M=m.s(S),y=Z(m,H);return W(m,H,y,H.getAgentEdges().toList(function(c){return _.isVisible(c)&&c.s(S)===M&&Z(c,H)===y}),y===L||y===C)},Q=function(M,I,S){var q=M.getSourceAgent(),b=M.getTargetAgent(),u=q.getId()>b.getId(),$=u?b:q,R=u?q:b,N=$.p(),v=R.p(),p=S(I,M,$),m=S(I,M,R),O=M.s(F),w=O?0:r(I,$)/2,i=O?0:r(I,R)/2,Y=O?0:B(I,$)/2,H=O?0:B(I,R)/2,P=p.offset,G=m.offset,_=p.side,U=m.side,a=new T;return _===o?(a.add({x:N.x+P,y:N.y-Y}),a.add({x:N.x+P,y:v.y+G}),U===z?a.add({x:v.x-i,y:v.y+G}):a.add({x:v.x+i,y:v.y+G})):_===C?(a.add({x:N.x+P,y:N.y+Y}),a.add({x:N.x+P,y:v.y+G}),U===z?a.add({x:v.x-i,y:v.y+G}):a.add({x:v.x+i,y:v.y+G})):_===z?(a.add({x:N.x-w,y:N.y+P}),a.add({x:v.x+G,y:N.y+P}),U===C?a.add({x:v.x+G,y:v.y+H}):a.add({x:v.x+G,y:v.y-H})):_===L&&(a.add({x:N.x+w,y:N.y+P}),a.add({x:v.x+G,y:N.y+P}),U===C?a.add({x:v.x+G,y:v.y+H}):a.add({x:v.x+G,y:v.y-H})),u&&a.reverse(),h(a,M)};P("ortho2",function(d,$,E){var p,y,j=d.s(F),N=d.s("edge.ortho"),_=d.getSourceAgent(),D=d.getTargetAgent(),c=_.getId()>D.getId(),q=c?D:_,s=c?_:D,n=q.p(),i=s.p(),V=A(E,d,q),I=A(E,d,s),g=j?0:r(E,q)/2,M=j?0:B(E,q)/2,O=j?0:r(E,s)/2,Q=j?0:B(E,s)/2,K=new T,f=V.offset,m=I.offset,e=V.side;return e===L?(p=i.y>n.y?-f:f,y=n.x+g+(i.x-O-n.x-g)*N,K.add({x:n.x+g,y:n.y+f}),K.add({x:y+p,y:n.y+f}),K.add({x:y+p,y:i.y+m}),K.add({x:i.x-O,y:i.y+m})):e===z?(p=i.y>n.y?-f:f,y=n.x-g-(n.x-g-i.x-O)*N,K.add({x:n.x-g,y:n.y+f}),K.add({x:y-p,y:n.y+f}),K.add({x:y-p,y:i.y+m}),K.add({x:i.x+O,y:i.y+m})):e===C?(p=i.x>n.x?-f:f,y=n.y+M+(i.y-Q-n.y-M)*N,K.add({x:n.x+f,y:n.y+M}),K.add({x:n.x+f,y:y+p}),K.add({x:i.x+m,y:y+p}),K.add({x:i.x+m,y:i.y-Q})):e===o&&(p=i.x>n.x?-f:f,y=n.y-M-(n.y-M-i.y-Q)*N,K.add({x:n.x+f,y:n.y-M}),K.add({x:n.x+f,y:y-p}),K.add({x:i.x+m,y:y-p}),K.add({x:i.x+m,y:i.y+Q})),c&&K.reverse(),h(K,d)},!0),P("flex2",function(k,W,P){var Y,m=k.getSourceAgent(),i=k.getTargetAgent(),y=m.getId()>i.getId(),v=y?i:m,p=y?m:i,U=v.p(),x=p.p(),d=A(P,k,v),I=A(P,k,p),c=k.s(F),w=k.s("edge.flex")+(d.size-1)/2*k.s(e),n=c?0:r(P,v)/2,G=c?0:B(P,v)/2,Z=c?0:r(P,p)/2,H=c?0:B(P,p)/2,S=new T,E=d.offset,R=I.offset,V=d.side;return V===L?(Y=x.y>U.y?-E:E,S.add({x:U.x+n,y:U.y+E}),S.add({x:U.x+n+w+Y,y:U.y+E}),S.add({x:x.x-Z-w+Y,y:x.y+R}),S.add({x:x.x-Z,y:x.y+R})):V===z?(Y=x.y>U.y?-E:E,S.add({x:U.x-n,y:U.y+E}),S.add({x:U.x-n-w-Y,y:U.y+E}),S.add({x:x.x+Z+w-Y,y:x.y+R}),S.add({x:x.x+Z,y:x.y+R})):V===C?(Y=x.x>U.x?-E:E,S.add({x:U.x+E,y:U.y+G}),S.add({x:U.x+E,y:U.y+G+w+Y}),S.add({x:x.x+R,y:x.y-H-w+Y}),S.add({x:x.x+R,y:x.y-H})):V===o&&(Y=x.x>U.x?-E:E,S.add({x:U.x+E,y:U.y-G}),S.add({x:U.x+E,y:U.y-G-w-Y}),S.add({x:x.x+R,y:x.y+H+w-Y}),S.add({x:x.x+R,y:x.y+H})),y&&S.reverse(),h(S,k)},!0),P("extend.north2",function(U,w,Y){var S=U.getSourceAgent(),l=U.getTargetAgent(),E=S.getId()>l.getId(),z=E?l:S,d=E?S:l,G=z.p(),m=d.p(),v=p(Y,U,z,o),b=p(Y,U,d,o,!0),n=U.s(F),K=n?0:B(Y,z)/2,H=n?0:B(Y,d)/2,N=v.offset,M=b.offset,A=U.s(y)+(v.size-1)/2*U.s(e),_=s(G.y-K,m.y-H)-A+(G.x<m.x?N:-N),X=new T;return X.add({x:G.x+N,y:G.y-K}),X.add({x:G.x+N,y:_}),X.add({x:m.x+M,y:_}),X.add({x:m.x+M,y:m.y-H}),E&&X.reverse(),h(X,U)},!0),P("extend.south2",function(O,Q,q){var M=O.getSourceAgent(),g=O.getTargetAgent(),s=M.getId()>g.getId(),n=s?g:M,V=s?M:g,w=n.p(),b=V.p(),D=p(q,O,n,C),J=p(q,O,V,C,!0),o=O.s(F),U=o?0:B(q,n)/2,d=o?0:B(q,V)/2,L=D.offset,j=J.offset,X=O.s(y)+(D.size-1)/2*O.s(e),k=R(w.y+U,b.y+d)+X+(w.x>b.x?L:-L),t=new T;return t.add({x:w.x+L,y:w.y+U}),t.add({x:w.x+L,y:k}),t.add({x:b.x+j,y:k}),t.add({x:b.x+j,y:b.y+d}),s&&t.reverse(),h(t,O)},!0),P("extend.west2",function(t,u,V){var S=t.getSourceAgent(),d=t.getTargetAgent(),k=S.getId()>d.getId(),f=k?d:S,E=k?S:d,P=f.p(),W=E.p(),n=p(V,t,f,o),G=p(V,t,E,o,!0),j=t.s(F),Q=j?0:r(V,f)/2,D=j?0:r(V,E)/2,M=n.offset,v=G.offset,I=t.s(y)+(n.size-1)/2*t.s(e),a=s(P.x-Q,W.x-D)-I+(P.y<W.y?M:-M),l=new T;return l.add({x:P.x-Q,y:P.y+M}),l.add({x:a,y:P.y+M}),l.add({x:a,y:W.y+v}),l.add({x:W.x-D,y:W.y+v}),k&&l.reverse(),h(l,t)},!0),P("extend.east2",function(G,Z,S){var x=G.getSourceAgent(),K=G.getTargetAgent(),C=x.getId()>K.getId(),i=C?K:x,l=C?x:K,k=i.p(),_=l.p(),g=p(S,G,i,o),Q=p(S,G,l,o,!0),V=G.s(F),s=V?0:r(S,i)/2,O=V?0:r(S,l)/2,q=g.offset,J=Q.offset,u=G.s(y)+(g.size-1)/2*G.s(e),H=R(k.x+s,_.x+O)+u+(k.y>_.y?q:-q),v=new T;return v.add({x:k.x+s,y:k.y+q}),v.add({x:H,y:k.y+q}),v.add({x:H,y:_.y+J}),v.add({x:_.x+O,y:_.y+J}),C&&v.reverse(),h(v,G)},!0),P("v.h2",function(M,i,t){return Q(M,t,k)},!0),P("h.v2",function(E,O,K){return Q(E,K,l)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
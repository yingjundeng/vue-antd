!function(d,N,A){"use strict";var l="ht",r=d[l],V=r.Default,y=r.graph,b=V.getInternal(),B=b.ui(),o=B.NodeUI.prototype,m=B.ShapeUI.prototype,W=y.GraphView,$=W.prototype,i=B.EdgeUI.prototype,t=r.Node,I=r.Shape,Q=r.Edge,n=r.Group,O=V.isTouchable,w=V.isTouchEvent,G=V.preventDefault,u=d.setTimeout,Y=V.grow,X=V.isDragging,T=V.getDistance,j=null,k=r.List,h="undefined"!=typeof Float32Array?Float32Array:Array,v=Math,P=v.PI,s="Crossing",C="No Crossing",f=P/2,g=2*P,q=v.atan2,F=v.sqrt,p=v.pow,c=v.sin,U=v.cos,M=v.min,S=v.max,K=v.abs,D=v.ceil,e=v.round,z=V.unionPoint,L=V.unionRect,J=V.containsPoint,_=V.clone,H="rgb(52, 152, 219)",a="red",x={northwest:0,north:1,northeast:2,west:7,east:3,southwest:6,south:5,southeast:4},R={width:400,height:100,comps:[{type:"shape",points:{func:function(){for(var p=[10,8,162,36,314,37,269,2,398,49,268,98,314,58,161,60,9,91,103,49,10,8],g=0;g<p.length;g++){var r=p[g];r=0===g%2?r/400*R.width:r/100*R.height,p[g]=r}return R.width>120&&(p[4]=R.width-26,p[6]=R.width-40,p[10]=R.width-40,p[12]=R.width-26,p[18]=33),p}},segments:[1,3,2,2,2,2,3,2,2],background:"white",gradient:"linear.east",gradientColor:"red"}]},E={width:300,height:300,comps:[{type:"circle",rect:[20,0,120,120],background:H,rotation:.61},{type:"circle",rect:[200,120,70,70],background:H,rotation:.61},{type:"circle",rect:[200,220,70,70],background:H,rotation:.61},{type:"shape",points:[80,60,80,155,200,155],borderWidth:20,borderColor:H},{type:"shape",points:[80,60,80,255,200,255],borderWidth:20,borderColor:H}]},Z={width:300,height:300,comps:[{type:"shape",points:[114,239,115,106,112,73,149,73,149,73,175,73,177,105,179,261,178,302,147,307,98,308,83,307,72,276,73,260,72,81,74,29,115,21,191,21,221,22,224,53,223,238],segments:[1,2,3,2,3,2,3,2,4,2,3,2,3,2],borderWidth:20,borderColor:a,rotation:.61}]},Vg={width:300,height:300,comps:[{type:"circle",rect:[210,0,90,90],background:H},{type:"circle",rect:[0,210,90,90],background:H},{type:"shape",points:[255,45,45,255],borderWidth:20,borderColor:H}]},Kb={width:300,height:300,comps:[{type:"shape",points:[20,20,280,280],borderWidth:30,borderColor:a},{type:"shape",points:[280,20,20,280],borderWidth:30,borderColor:a}]},Nd={width:300,height:300,comps:[{type:"shape",points:[270,30,30,150,270,270],borderWidth:40,borderColor:H}]},Gg={width:300,height:300,comps:[{type:"shape",points:[30,30,270,150,30,270],borderWidth:40,borderColor:a}]},Bm={width:300,height:300,comps:[{type:"rect",rect:[125.58,52.76,40,231.96],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[27.87,61.06,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:5.5},{type:"rect",rect:[113.36,61,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:.79}]},nl={width:300,height:300,author:"",note:"",comps:[{type:"rect",rect:[135.15,38.76,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,2.35,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,115.72,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,167.62,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[135.15,177.33,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,251.39,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:3.14}]},qh=function(v){var i=v.touches[0];return i?i:v.changedTouches[0]},dg=function(z,D,l,J){return q(J-D,l-z)},Md=function(N,K){return{x:N.x*K,y:N.y*K}},Ef=function(z,w){z.each(function(i){return z.isSelected(i)?w(i):void 0})},en=function(j,X){j.reverseEach(function(r){return j.isSelected(r)?X(r):void 0})},Um=function(X,Z,C){var K,V,o,R,M,$=this,J=Z,y=$.gv;if(X instanceof I){o=X.getSegments();var j=y.getDataUI(X);M=j._55O.$15l,o&&o.size()||(o=Vn(M)),X.isClosePath()&&o.indexOf(5)<0&&(o=new k(o._as),o.add(5)),K=$g(X,j,J),V=M[K]}else{var Y=y.getDataUI(X);M=ze(Y,X.s("edge.points")),o=X.s("edge.segments"),o&&o.size()||(o=Vn(M)),M=M._as,K=$g(X,Y,J),V=M[K]}if(o&&(R=o.get(J)),2===R||1===R||5===R){var g=M[K+1];5===R&&(g=M[0]);var t=fd(V,C,g);return t}return C},Yr=function(J,v,l,s){var _=v/2,w=l/2,i=Wo(J,-_,-w,s),G=Wo(J,_,-w,s),H=Wo(J,-_,w,s),Y=Wo(J,_,w,s),L=Wo(J,0,-w,s),P=Wo(J,_,0,s),B=Wo(J,0,w,s),S=Wo(J,-_,0,s);return[i,G,H,Y,L,P,B,S]},fd=function(K,b,Z){var a={x:b.x-K.x,y:b.y-K.y},R={x:Z.x-K.x,y:Z.y-K.y},X=F(p(Z.x-K.x,2)+p(Z.y-K.y,2)),d={x:R.x/X,y:R.y/X},D=a.x*d.x+a.y*d.y,h={x:d.x*D,y:d.y*D};return{x:K.x+h.x,y:K.y+h.y}},Wo=function(x,K,l,h){var D=U(h)*K-c(h)*l,f=c(h)*K+U(h)*l;return x?{x:x.x+D,y:x.y+f}:{x:D,y:f}},km=function(O,N){return N>2*O?O:N/2},as=function(k,E,n,p){var D=T(k,E);return n=p?M(n,D):km(n,D),D?n/=D:n=0,{x:k.x+(E.x-k.x)*n,y:k.y+(E.y-k.y)*n}},gn=function(u,m){var i,n,h=u.gv,H=u._data,P=H._40I,$=H._41I,M=H.s("edge.offset"),j=H.s("edge.source.position"),A=H.s("edge.target.position"),T=H.s("edge.source.offset.x"),R=H.s("edge.source.offset.y"),r=H.s("edge.target.offset.x"),t=H.s("edge.target.offset.y"),I=H.s("edge.source.anchor.x"),o=H.s("edge.source.anchor.y"),Z=H.s("edge.target.anchor.x"),x=H.s("edge.target.anchor.y");if(m?(i=b.getEdgeAgentPosition(h,P,j,T,R,I,o),n=b.getEdgeAgentPosition(h,$,A,r,t,Z,x)):(i=b.getEdgeAgentPosition(h,P,j,0,0,I,o),n=b.getEdgeAgentPosition(h,$,A,0,0,Z,x)),"points"===H.s("edge.type")&&M&&!H.s("edge.center")&&i){var L=H.s("edge.points")||new k,J=L.size(),w=as(i,J?L.get(0):n,M,J),_=as(n,J?L.get(J-1):i,M,J);i=w,n=_}return[i,n]},ze=function(y,w,s){var z=y._78o,O=y._data,T=O.s("edge.type"),h=[z.sourcePoint,z.targetPoint];return"points"===T?s&&(h=gn(y)):h=z.center?T?s?gn(y):gn(y,!0):s?gn(y):[z.c1,z.c2]:s?gn(y):gn(y,!0),w=new k(w?w._as:j),w.add(h[0],0),w.add(h[1]),w},ud=function(V){return V=new k(V._as),V.removeAt(0),V.removeAt(V.size()-1),V},Vn=function(W){W._as||(W=new k(W));var N=new k;N.add(1);for(var F=1;F<W.size();F++)N.add(2);return N},ye=function(V,$){return{x:(V.x+$.x)/2,y:(V.y+$.y)/2}},Hp=function(V,Z){return{x:V.x+1*(Z.x-V.x)/4,y:V.y+1*(Z.y-V.y)/4}},Xk=function(M,L){return{x:M.x+3*(L.x-M.x)/4,y:M.y+3*(L.y-M.y)/4}},xf=function(v,H,E,i){var P=H.x+H.width/2,L=H.y+H.height/2,I=F(P*P+L*L),K=q(L,P)+E;return{x:i.x+I*U(K),y:i.y+I*c(K)}},_p=$.validateImpl,Yi=$.isRectEditable,ts=$.isPointEditable,mq=$._42,Go=m._79o,nr=i._79o,Lb=m._48O,_n=m._47O,Yq=o._48O,Bp=o._80o,Wd=m._80o,Ic=o.getSelectWidth,Pp=o._47O,am=i._47O,Vk=$.isEditable,pk=["northwest","north","northeast","east","southeast","south","southwest","west"],we=function(T,Y,N,i,U,C,H,e,P,w){var A=T.x,h=T.y,R=T.width,O=T.height,s={x:A+R/2,y:h+O/2};i=i||0,Y=Wo(s,Y.x-s.x,Y.y-s.y,-i),H&&!e&&(Y.x+=P,Y.y+=w);var _=.01;if("northwest"===N?(Y.x+U>A+R-_&&(Y.x=A+R-U-_),Y.y+U>h+O-_&&(Y.y=h+O-U-_),T=z(Y,{x:A+R,y:h+O})):"north"===N?(Y.y+U>h+O-_&&(Y.y=h+O-U-_),T=z({x:A,y:Y.y},{x:A+R,y:h+O})):"northeast"===N?(Y.x<A+U+_&&(Y.x=A+U+_),Y.y+U>h+O-_&&(Y.y=h+O-U-_),T=z({x:A,y:Y.y},{x:Y.x,y:h+O})):"west"===N?(Y.x+U>A+R-_&&(Y.x=A+R-U-_),T=z({x:Y.x,y:h},{x:A+R,y:h+O})):"east"===N?(Y.x<A+U+_&&(Y.x=A+U+_),T=z({x:A,y:h},{x:Y.x,y:h+O})):"southwest"===N?(Y.x+U>A+R-_&&(Y.x=A+R-U-_),Y.y<h+U+_&&(Y.y=h+U+_),T=z({x:Y.x,y:h},{x:A+R,y:Y.y})):"south"===N?(Y.y<h+U+_&&(Y.y=h+U+_),T=z({x:A,y:h},{x:A+R,y:Y.y})):"southeast"===N&&(Y.x<A+U+_&&(Y.x=A+U+_),Y.y<h+U+_&&(Y.y=h+U+_),T=z({x:A,y:h},Y)),"keepRatio"===C&&(!H&&e||H&&!e)&&("northeast"===N||"southeast"===N||"northwest"===N||"southwest"===N)){var c=T.width,l=T.height,$=c/R,p=l/O,v=M($,p);T.width=R*v,T.height=O*v,"northeast"===N?T.y=h+(O-T.height):"northwest"===N?(T.y=h+(O-T.height),T.x=A+(R-T.width)):"southwest"===N&&(T.x=A+(R-T.width))}T.x-=s.x,T.y-=s.y;var E=xf(j,T,i,s);return T.x=E.x-T.width/2,T.y=E.y-T.height/2,T},so=function(L,f,x,D){var O=L.getRotation(),V=f,c=V.x,g=V.y,X=V.width,W=V.height,b={x:c+V.width/2,y:g+V.height/2};D=Wo(b,D.x-b.x,D.y-b.y,-O),"northwest"===x?V=z(D,{x:c+X,y:g+W}):"north"===x?V=z({x:c,y:D.y},{x:c+X,y:g+W}):"northeast"===x?V=z({x:c,y:D.y},{x:D.x,y:g+W}):"west"===x?V=z({x:D.x,y:g},{x:c+X,y:g+W}):"east"===x?V=z({x:c,y:g},{x:D.x,y:g+W}):"southwest"===x?V=z({x:D.x,y:g},{x:c+X,y:D.y}):"south"===x?V=z({x:c,y:g},{x:c+X,y:D.y}):"southeast"===x&&(V=z({x:c,y:g},D)),L.setRect(V),V.x-=b.x,V.y-=b.y;var n=xf(L,V,O,b);L.p(n.x,n.y)},Wp=function(Z,C,I,e,n,y,r,i){var B=j;y?(B=Wo(j,n.x-C.x,n.y-C.y,-I),B.x-=r.x,B.y-=r.y):B=Wo(j,n.x-C.x,n.y-C.y,0);var c={x:C.x+B.x,y:C.y+B.y};i&&(c=i(c.x,c.y)),c.e=Z.getPoints().get(e).e,Z.setPoint(e,c);var z=Z.getWidth(),Y=Z.getHeight(),w=Z.p().x-z/2,k=Z.p().y-Y/2;w-=C.x,k-=C.y;var v=xf(Z,{x:w,y:k,width:z,height:Y},I,C);Z.p(v.x,v.y)},$g=function(V,w,P){var D,K;if(V instanceof I?(D=V.getPoints(),K=V.getSegments()):V instanceof Q&&"points"===V.s("edge.type")&&(D=V.s("edge.points"),K=V.s("edge.segments"),D=ze(w,D)),K&&K.size()||(K=Vn(D)),V instanceof I&&V.isClosePath()&&K.indexOf(5)<0&&(K=new k(K._as),K.add(5)),K)for(var B=-1,U=0;U<K.size();U++){if(U===P)return B;var J=K.get(U);1===J?B+=1:2===J?B+=1:3===J?B+=2:4===J&&(B+=3)}},di=function(b,A,h){var Z,q;if(b instanceof I?(Z=b.getPoints(),q=b.getSegments()):b instanceof Q&&"points"===b.s("edge.type")&&(Z=b.s("edge.points"),q=b.s("edge.segments"),Z=ze(A,Z)),q&&q.size()||(q=Vn(Z)),q)for(var C=-1,R=0;R<q.size();R++){var D=q.get(R);if(1===D?C+=1:2===D?C+=1:3===D?C+=2:4===D&&(C+=3),C===h)return R}},Mf=function(G,t){var S=[G[0]-t[0],G[1]-t[1],G[2]-t[2]];return S},ng=function(){var U=new h(16);return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U},fn=function(B,z){var a=B[0],f=B[1],q=B[2];return B[0]=z[0]*a+z[4]*f+z[8]*q+z[12],B[1]=z[1]*a+z[5]*f+z[9]*q+z[13],B[2]=z[2]*a+z[6]*f+z[10]*q+z[14],B},Pg=function(J,M){if(M){var Y=c(M),Z=U(M),H=J[0],N=J[1],v=J[2],L=J[3],$=J[8],F=J[9],x=J[10],B=J[11];J[0]=H*Z-$*Y,J[1]=N*Z-F*Y,J[2]=v*Z-x*Y,J[3]=L*Z-B*Y,J[8]=H*Y+$*Z,J[9]=N*Y+F*Z,J[10]=v*Y+x*Z,J[11]=L*Y+B*Z}},Xo=function(X,o){for(var S=X.s("grid.row.count"),W=X.s("grid.column.count"),P=0;S>P;P++)for(var c=0;W>c;c++){var m=X.getCellRect(P,c);if(J(m,o))return{rowIndex:P,columnIndex:c,rect:m,grid:X}}return null},Nf=function(e,V,s,W,h,m){var j={},O=s-e,A=W-V,I=v.sqrt(O*O+A*A),q=O/I,X=A/I,P=(-e+h)*q+(-V+m)*X;return 0>=P?(j.x=e,j.y=V):P>=I?(j.x=s,j.y=W):(j.x=e+P*q,j.y=V+P*X),O=h-j.x,A=m-j.y,j.z=v.sqrt(O*O+A*A),j},yr=function(P,n){var g,y,_,J,v,e,G,q,A=P.getPoints(),d=P.getSegments(),E=P.p(),X=P.getRotation();if(!d||!(d.indexOf(3)>0||d.indexOf(4)>0)){for(q=0;q<=A.size()-1;q++)if(q===A.size()-1?(v=A.get(0),J=A.get(q)):(J=A.get(q),v=A.get(q+1)),J=Wo(E,J.x-E.x,J.y-E.y,X),v=Wo(E,v.x-E.x,v.y-E.y,X),e=Nf(J.x,J.y,v.x,v.y,n.x,n.y),G=e.z,G<(P.s("shape.border.width")||10)){y=J,_=v,g=q;break}if(g!=j){var B=Nf(y.x,y.y,_.x,_.y,n.x,n.y),f=T(y,B);return{attachIndex:g,attachOffset:f}}}},ac=function(L){for(var e=L._data,T=e.p(),s=e.getRotation(),C=e.getPoints(),Y=j,Q=[],W=0;W<C.size();W++)Y=C.get(W),Q.push(Wo(T,Y.x-T.x,Y.y-T.y,s));L._55O.$15l=Q};V.setImage("xeditinteractor_parentIcon",E),V.setImage("xeditinteractor_hostIcon",Z),V.setImage("xeditinteractor_edgeIcon",Vg),V.setImage("xeditinteractor_removeIcon",Kb),V.setImage("xeditinteractor_sourceIcon",Nd),V.setImage("xeditinteractor_targetIcon",Gg),V.setImage("xeditinteractor_elevationIcon",Bm),V.setImage("xeditinteractor_tallIcon",nl),$._editPointSize=O?24:9,$._edgeHelpers=["parent","remove","source","target"],$._leftTopHelpers=["parent"],$._rightTopHelpers=["host"],$._leftBottomHelpers=["edge"],$._rightBottomHelpers=["remove"],pk=pk.concat(pk).concat(pk),i._79o=function(){var w=this,H=w.gv,u=H.getZoom(),W=H._editInteractor,E=nr.call(w);if(!E)return null;var S=gn(w,!0),X=S[0],A=S[1],M={x:E.x,y:E.y,width:E.width,height:E.height},v=z(X,A);if(W instanceof y.XEditInteractor){M=L(M,v);var p=w._55O,d=H.getEditPointSize()/u+2,r=0;p&&p._43O&&(r+=d/2,Y(M,r))}return M},i._47O=function(p){var w=this,Z=w.gv,o=Z._editInteractor;o instanceof y.XEditInteractor||am.call(w,p)},i.rectIntersects=function(k){var v=this,D=v._data,J=v.gv,L=J.getZoom(),o=v._55O,m=J._editInteractor;if(m instanceof y.XEditInteractor&&J.isEditable(D)&&o&&o._43O&&"points"===D.s("edge.type")){var U=D.s("edge.points"),z=D.s("edge.segments");U=ze(v,U),z&&z.size()||(z=Vn(U)),U=U._as;var K=!1,q=O?5:1,h=k.x+q,R=k.y+q,T={x:h,y:R};if(m._edge===D&&m._hoverSegmentIndex>=0){var X=J._editInteractor._hoverSegmentIndex,i=z.get(X),Y=$g(D,v,X),I=j;if(Y!=j&&Y>=0){var G=U[Y],n=J.getSegmentHoverWidth()/L;if(2===i||1===i){var N=U[Y+1];I=mh(new Uj(G.x,G.y),new Uj(N.x,N.y),new Uj(T.x-n,T.y-n),new Uj(T.x+2*n,T.y+2*n)),I.$62l===s&&(K=!0)}else if(3===i){var M=U[Y+1],N=U[Y+2];I=kf(new Uj(G.x,G.y),new Uj(M.x,M.y),new Uj(N.x,N.y),new Uj(T.x-n,T.y-n),new Uj(T.x+2*n,T.y+2*n)),I.$62l===s&&(K=!0)}else if(4===i){var b=U[Y+1],B=U[Y+2];N=U[Y+3],I=lc(new Uj(G.x,G.y),new Uj(b.x,b.y),new Uj(B.x,B.y),new Uj(N.x,N.y),new Uj(T.x-n,T.y-n),new Uj(T.x+2*n,T.y+2*n)),I.$62l===s&&(K=!0)}}}if(K)return!0}return j},m._47O=function(I){var $=this,E=$.gv,B=E._editInteractor;B instanceof y.XEditInteractor||_n.call($,I)},m.rectIntersects=function(c){var h=this,C=h._data,z=h.gv,e=z.getZoom(),p=h._55O,H=z._editInteractor;if(H instanceof y.XEditInteractor&&z.isEditable(C)&&p&&p._43O){var U=p.$15l,g=!1,L=O?5:1,u=c.x+L,b=c.y+L,K={x:u,y:b};if(U&&U.length===C.getPoints().size()||(ac(h),U=p.$15l),H._shape===C&&H._hoverSegmentIndex>=0){var P=C.getSegments();P&&P.size()||(P=Vn(U));var $=z._editInteractor._hoverSegmentIndex,m=P.get($),V=$g(C,h,$),X=j;if(V!=j&&V>=0){var d=U[V],t=z.getSegmentHoverWidth()/e;if(2===m||1===m){var M=U[V+1];X=mh(new Uj(d.x,d.y),new Uj(M.x,M.y),new Uj(K.x-t,K.y-t),new Uj(K.x+2*t,K.y+2*t)),X.$62l===s&&(g=!0)}else if(3===m){var S=U[V+1],M=U[V+2];X=kf(new Uj(d.x,d.y),new Uj(S.x,S.y),new Uj(M.x,M.y),new Uj(K.x-t,K.y-t),new Uj(K.x+2*t,K.y+2*t)),X.$62l===s&&(g=!0)}else if(4===m){var Y=U[V+1],f=U[V+2];M=U[V+3],X=lc(new Uj(d.x,d.y),new Uj(Y.x,Y.y),new Uj(f.x,f.y),new Uj(M.x,M.y),new Uj(K.x-t,K.y-t),new Uj(K.x+2*t,K.y+2*t)),X.$62l===s&&(g=!0)}}}if(g)return!0}return j},m._48O=function(){var u=this,A=u.gv,g=A._editInteractor;g instanceof y.XEditInteractor?(o._48O.call(u),u._55O._43O&&ac(u)):Lb.call(u)},m._79o=function(){var N=this,x=N.gv,j=x.getZoom(),Q=x._editInteractor,d=Go.call(N);if(d){var A={x:d.x,y:d.y,width:d.width,height:d.height};if(Q instanceof y.XEditInteractor){var V=N._55O,p=x.getEditPointSize()/j+2,i=0;V&&V._43O&&(i+=p/2,Y(A,i))}return A}},o._47O=function(V){var m=this,z=m.gv,r=z._editInteractor;if(r instanceof y.XEditInteractor);else{var S=m._55O;S&&S._98o&&Pp.call(m,V)}},o.getSelectWidth=function(){var Y=this,T=Y.gv,c=T._editInteractor,a=Y._data;return T.isEditable(a)&&c instanceof y.XEditInteractor?0:Ic.call(Y)},o._80o=function(S){var c=this,z=c.gv._editInteractor;if(Bp.call(c,S),z&&z._debug){S.save(),S.beginPath(),S.lineWidth=1,S.strokeStyle="green";var p=c._79o();p&&(S.rect(p.x,p.y,p.width,p.height),S.stroke()),S.restore()}},m._80o=function(D){var M=this,r=M.gv._editInteractor;if(Wd.call(M,D),r&&r._debug){D.save(),D.beginPath(),D.lineWidth=1,D.strokeStyle="green";var G=M._79o();D.rect(G.x,G.y,G.width,G.height),D.stroke(),D.restore()}},o._48O=function(){var I=this,J=I.gv,e=I._data,x=J._editInteractor,v=I._55O,Q=e.p(),V=e.getRotation();if(x instanceof y.XEditInteractor){if(v._42O){var R=Yr(Q,e.getWidth(),e.getHeight(),V),m=R[0],p=R[1],$=R[2],n=R[3],A=R[4],o=R[5],k=R[6],Y=R[7];v.$45l=[m,A,p,o,n,k,$,Y]}}else Yq.call(I)},$.getResizeMode=function(){return this.$25l||"normal"},$.setResizeMode=function(w){var J=this.$25l;this.$25l=w,this.fp("resizeMode",J,w)},$.getSnapAngle=function(){return this.$26l||Math.PI/36},$.setSnapAngle=function(z){var J=this.$26l;this.$26l=z,this.fp("snapAngle",J,z)},$.getSnapSpacing=function(){return this.$27l},$.setSnapSpacing=function(a){var V=this.$27l;this.$27l=a,this.fp("snapSpacing",V,a)},$.getPointSnapSpacing=function(){return this._pointSnapSpacing},$.setPointSnapSpacing=function(x){var F=this._pointSnapSpacing;this._pointSnapSpacing=x,this.fp("pointSnapSpacing",F,x)},$.setHelperEditableFunc=function(W){var j=this._helperEditableFunc;this._helperEditableFunc=W,this.fp("helperEditableFunc",j,W)},$.getHelperEditableFunc=function(){return this._helperEditableFunc},$.setLeftTopHelpers=function(w){var o=this._leftTopHelpers;this._leftTopHelpers=w,this.fp("leftTopHelpers",o,w)},$.getLeftTopHelpers=function(){return this._leftTopHelpers},$.setLeftTopHelpersAlign=function(o){var e=this._leftTopHelpersAlign;this._leftTopHelpersAlign=o,this.fp("leftTopHelpersAlign",e,o)},$.getLeftTopHelpersAlign=function(){return this._leftTopHelpersAlign},$.setRightTopHelpers=function(y){var h=this._rightTopHelpers;this._rightTopHelpers=y,this.fp("rightTopHelpers",h,y)},$.getRightTopHelpers=function(){return this._rightTopHelpers},$.setRightTopHelpersAlign=function(C){var x=this._rightTopHelpersAlign;this._rightTopHelpersAlign=C,this.fp("rightTopHelpersAlign",x,C)},$.getRightTopHelpersAlign=function(){return this._rightTopHelpersAlign},$.setLeftBottomHelpers=function(y){var w=this._leftBottomHelpers;this._leftBottomHelpers=y,this.fp("leftBottomHelpers",w,y)},$.getLeftBottomHelpers=function(){return this._leftBottomHelpers},$.setLeftBottomHelpersAlign=function(I){var n=this._leftBottomHelpersAlign;this._leftBottomHelpersAlign=I,this.fp("leftBottomHelpersAlign",n,I)},$.getLeftBottomHelpersAlign=function(){return this._leftBottomHelpersAlign},$.setRightBottomHelpers=function(C){var m=this._rightBottomHelpers;this._rightBottomHelpers=C,this.fp("rightBottomHelpers",m,C)},$.getRightBottomHelpers=function(){return this._rightBottomHelpers},$.setRightBottomHelpersAlign=function(p){var V=this._rightBottomHelpersAlign;this._rightBottomHelpersAlign=p,this.fp("rightBottomHelpersAlign",V,p)},$.getRightBottomHelpersAlign=function(){return this._rightBottomHelpersAlign},$.setEdgeHelpers=function(M){var S=this._edgeHelpers;this._edgeHelpers=M,this.fp("edgeHelpers",S,M)},$.getEdgeHelpers=function(){return this._edgeHelpers},$.isHelperEditable=function(e,T){return e instanceof Q&&("host"===T||"edge"===T||"elevation"===T||"tall"===T)?!1:e instanceof t&&("source"===T||"target"===T)?!1:"pointElevation"===T?this._helperEditableFunc?this._helperEditableFunc(e,T):!1:this._helperEditableFunc?this._helperEditableFunc(e,T):!0},$.getEditHelperSize=function(){return this._editHelperSize||(O?28:16)},$.setEditHelperSize=function(e){var B=this._editHelperSize;this._editHelperSize=e,this.fp("editHelperSize",B,e)},$.getEditRectBorderColor=function(){return this.$28l||"rgb(0, 168, 255)"},$.setEditRectBorderColor=function(X){var R=this.$28l;this.$28l=X,this.fp("editRectBorderColor",R,X)},$.getNodeBorderColor=function(){return this.$29l||"#1ABC9C"},$.setNodeBorderColor=function(R){var b=this.$29l;this.$29l=R,this.fp("nodeBorderColor",b,R)},$.getEditRectBorderStyle=function(){return this.$30l||"dashed"},$.setEditRectBorderStyle=function(d){var T=this.$30l;this.$30l=d,this.fp("editRectBorderStyle",T,d)},$.getControlPointBackground=function(){return this.$31l||"#ff0"},$.setControlPointBackground=function(S){var p=this.$31l;this.$31l=S,this.fp("controlPointBackground",p,S)},$.getControlPointBorderColor=function(){return this.$32l||this._editPointBorderColor},$.setControlPointBorderColor=function(g){var M=this.$32l;this.$32l=g,this.fp("controlPointBorderColor",M,g)},$.getJoinPointBackground=function(){return this.$33l||this._editPointBackground},$.setJoinPointBackground=function(S){var d=this.$33l;this.$33l=S,this.fp("joinPointBackground",d,S)},$.getJoinPointBorderColor=function(){return this.$34l||this._editPointBorderColor},$.setJoinPointBorderColor=function(Q){var F=this.$34l;this.$34l=Q,this.fp("joinPointBorderColor",F,Q)},$.getDirectionLineColor=function(){return this.$35l||"#888"},$.setDirectionLineColor=function(O){var Z=this.$35l;this.$35l=O,this.fp("directionLineColor",Z,O)},$.getSegmentHoverColor=function(){return this.$36l||"rgba(255, 0, 0, 0.3)"},$.setSegmentHoverColor=function(v){var d=this.$36l;this.$36l=v,this.fp("segmentHoverColor",d,v)},$.getSegmentHoverWidth=function(){return this.$22l||(O?16:8)},$.setSegmentHoverWidth=function(r){var d=this.$22l;this.$22l=r,this.fp("segmentHoverWidth",d,r)},$.getSnapPointBorderColor=function(){return this.$38l||"#f00"},$.setSnapPointBorderColor=function(t){var M=this.$38l;this.$38l=t,this.fp("snapPointBorderColor",M,t)},$.getEditRectPadding=function(){return this.$39l!=j?this.$39l:6},$.setEditRectPadding=function(v){var C=this.$39l;this.$39l=v,this.fp("editRectPading",C,v)},$.isRectEditable=function(Y){var u=this,S=u._editInteractor;return S instanceof y.XEditInteractor?u._rectEditableFunc?u._rectEditableFunc(Y):!0:Yi.call(u,Y)},$.isPointEditable=function(w){var F=this,b=F._editInteractor;return b instanceof y.XEditInteractor?F._pointEditableFunc?F._pointEditableFunc(w):!0:ts.call(F,w)},$.validateImpl=function(){var d=this,w=d.$14l,K=d._editInteractor;if(w){var S=d.getWidth(),l=d.getHeight();(S!==w.clientWidth||l!==w.clientHeight)&&(K&&(K._68I=1),b.setCanvas(w,S,l),d._32I=1)}_p.call(this)},$.isEditable=function(D){var X=Vk.call(this,D),x=this._editInteractor;if(x instanceof y.XEditInteractor&&D instanceof Q){if(!D.s("2d.editable"))return!1;var p=this.getEditableFunc();X=p?p(D):!0}return X},$._42=function(Q,H){var K=this,S=K._editInteractor;mq.call(K,Q,H),S instanceof y.XEditInteractor&&S._68I&&S._42()},$.isSnapPoint=function(){return!0};var kn=function(N){arguments.length>0&&this.$58l(N)},Vm=kn.prototype;Vm.$58l=function($){this.$62l=$,this.points=new Array},Vm.$56l=function(r){this.points.push(r)},Vm.$57l=function(g){this.points=this.points.concat(g)};var Uj=function(q,_){arguments.length>0&&this.$58l(q,_)},Vc=Uj.prototype;Vc.$58l=function(w,_){this.x=w,this.y=_},Vc.add=function(m){return new Uj(this.x+m.x,this.y+m.y)},Vc.addEquals=function(M){return this.x+=M.x,this.y+=M.y,this},Vc.$55l=function(d){return new Uj(this.x*d,this.y*d)},Vc.eq=function(o){return this.x==o.x&&this.y==o.y},Vc.lt=function(p){return this.x<p.x&&this.y<p.y},Vc.lte=function(K){return this.x<=K.x&&this.y<=K.y},Vc.gt=function(a){return this.x>a.x&&this.y>a.y},Vc.gte=function(H){return this.x>=H.x&&this.y>=H.y},Vc.lerp=function(B,G){return new Uj(this.x+(B.x-this.x)*G,this.y+(B.y-this.y)*G)},Vc.distanceFrom=function(J){var Q=this.x-J.x,p=this.y-J.y;return F(Q*Q+p*p)},Vc.min=function(k){return new Uj(M(this.x,k.x),M(this.y,k.y))},Vc.max=function(N){return new Uj(S(this.x,N.x),S(this.y,N.y))},Vc.toString=function(){return this.x+","+this.y};var gd=function(){this.$58l(arguments)},Ek=gd.prototype;gd.TO=1e-6,gd.AC=6,Ek.$58l=function(C){this.co=new Array;for(var r=C.length-1;r>=0;r--)this.co.push(C[r])},Ek.$55l=function(_){for(var p=new gd,Y=0;Y<=this.$50l()+_.$50l();Y++)p.co.push(0);for(var Y=0;Y<=this.$50l();Y++)for(var l=0;l<=_.$50l();l++)p.co[Y+l]+=this.co[Y]*_.co[l];return p},Ek.$59l=function(){for(var w=this.$50l();w>=0&&K(this.co[w])<=gd.TO;w--)this.co.pop()},Ek.$50l=function(){return this.co.length-1},Ek.$51l=function(){var v;switch(this.$59l(),this.$50l()){case 0:v=new Array;break;case 1:v=this.$52l();break;case 2:v=this.$53l();break;case 3:v=this.$54l();break;case 4:v=this.$63l();break;default:v=new Array}return v},Ek.$52l=function(){var d=new Array,H=this.co[1];return 0!=H&&d.push(-this.co[0]/H),d},Ek.$53l=function(){var I=new Array;if(2==this.$50l()){var t=this.co[2],E=this.co[1]/t,_=this.co[0]/t,T=E*E-4*_;if(T>0){var u=F(T);I.push(.5*(-E+u)),I.push(.5*(-E-u))}else 0==T&&I.push(.5*-E)}return I},Ek.$63l=function(){var X=new Array;if(4==this.$50l()){var A=this.co[4],b=this.co[3]/A,v=this.co[2]/A,q=this.co[1]/A,w=this.co[0]/A,c=new gd(1,-v,b*q-4*w,-b*b*w+4*v*w-q*q).$54l(),l=c[0],D=b*b/4-v+l;if(K(D)<=gd.TO&&(D=0),D>0){var m=F(D),B=3*b*b/4-m*m-2*v,R=(4*b*v-8*q-b*b*b)/(4*m),Z=B+R,N=B-R;if(K(Z)<=gd.TO&&(Z=0),K(N)<=gd.TO&&(N=0),Z>=0){var h=F(Z);X.push(-b/4+(m+h)/2),X.push(-b/4+(m-h)/2)}if(N>=0){var h=F(N);X.push(-b/4+(h-m)/2),X.push(-b/4-(h+m)/2)}}else if(0>D);else{var R=l*l-4*w;if(R>=-gd.TO){if(0>R&&(R=0),R=2*F(R),B=3*b*b/4-2*v,B+R>=gd.TO){var H=F(B+R);X.push(-b/4+H/2),X.push(-b/4-H/2)}if(B-R>=gd.TO){var H=F(B-R);X.push(-b/4+H/2),X.push(-b/4-H/2)}}}}return X},Ek.$54l=function(){var Y=new Array;if(3==this.$50l()){var $=this.co[3],Q=this.co[2]/$,X=this.co[1]/$,T=this.co[0]/$,t=(3*X-Q*Q)/3,n=(2*Q*Q*Q-9*X*Q+27*T)/27,P=Q/3,L=n*n/4+t*t*t/27,B=n/2;if(K(L)<=gd.TO&&(L=0),L>0){var x,e,J=F(L);x=-B+J,e=x>=0?p(x,1/3):-p(-x,1/3),x=-B-J,x>=0?e+=p(x,1/3):e-=p(-x,1/3),Y.push(e-P)}else if(0>L){var H=F(-t/3),i=q(F(-L),-B)/3,l=U(i),I=c(i),y=F(3);Y.push(2*H*l-P),Y.push(-H*(l+y*I)-P),Y.push(-H*(l-y*I)-P)}else{var x;x=B>=0?-p(B,1/3):p(-B,1/3),Y.push(2*x-P),Y.push(-x-P)}}return Y};var kr=function(A,i){arguments.length>0&&this.$58l(A,i)},bf=kr.prototype;bf.$58l=function(E,G){this.x=E,this.y=G},bf.length=function(){return F(this.x*this.x+this.y*this.y)},bf.$60l=function(v){return this.x*v.x+this.y*v.y};var fl=function(b,e,L,z){var J,q=(z.x-L.x)*(b.y-L.y)-(z.y-L.y)*(b.x-L.x),A=(e.x-b.x)*(b.y-L.y)-(e.y-b.y)*(b.x-L.x),E=(z.y-L.y)*(e.x-b.x)-(z.x-L.x)*(e.y-b.y);if(0!=E){var S=q/E,Q=A/E;S>=0&&1>=S&&Q>=0&&1>=Q?(J=new kn(s),J.points.push(new Uj(b.x+S*(e.x-b.x),b.y+S*(e.y-b.y)))):J=new kn(C)}else J=0==q||0==A?new kn("C"):new kn("P");return J},ve=function(a,o,B,x,H){var Z,z,O,X,S,V,I,g=x.min(H),D=x.max(H),P=new kn(C);Z=o.$55l(-2),O=a.add(Z.add(B)),Z=a.$55l(-2),z=o.$55l(2),X=Z.add(z),S=new Uj(a.x,a.y),I=new kr(x.y-H.y,H.x-x.x),V=x.x*H.y-H.x*x.y;for(var b=new gd(I.$60l(O),I.$60l(X),I.$60l(S)+V).$51l(),h=0;h<b.length;h++){var w=b[h];if(w>=0&&1>=w){var t=a.lerp(o,w),A=o.lerp(B,w),p=t.lerp(A,w);x.x==H.x?g.y<=p.y&&p.y<=D.y&&(P.$62l=s,P.$56l(p)):x.y==H.y?g.x<=p.x&&p.x<=D.x&&(P.$62l=s,P.$56l(p)):p.gte(g)&&p.lte(D)&&(P.$62l=s,P.$56l(p))}}return P},kf=function(l,b,V,f,W){var u=f.min(W),y=f.max(W),r=new Uj(y.x,u.y),q=new Uj(u.x,y.y),H=ve(l,b,V,u,r),G=ve(l,b,V,r,y),F=ve(l,b,V,y,q),O=ve(l,b,V,q,u),d=new kn(C);return d.$57l(H.points),d.$57l(G.points),d.$57l(F.points),d.$57l(O.points),d.points.length>0&&(d.$62l=s),d},Xh=function(q,B,X,G,d,$){var z,o,v,w,Y,t,f,x,E,M,K=d.min($),e=d.max($),g=new kn(C);z=q.$55l(-1),o=B.$55l(3),v=X.$55l(-3),w=z.add(o.add(v.add(G))),Y=new kr(w.x,w.y),z=q.$55l(3),o=B.$55l(-6),v=X.$55l(3),w=z.add(o.add(v)),t=new kr(w.x,w.y),z=q.$55l(-3),o=B.$55l(3),v=z.add(o),f=new kr(v.x,v.y),x=new kr(q.x,q.y),M=new kr(d.y-$.y,$.x-d.x),E=d.x*$.y-$.x*d.y;for(var Z=new gd(M.$60l(Y),M.$60l(t),M.$60l(f),M.$60l(x)+E).$51l(),a=0;a<Z.length;a++){var F=Z[a];if(F>=0&&1>=F){var O=q.lerp(B,F),n=B.lerp(X,F),T=X.lerp(G,F),r=O.lerp(n,F),p=n.lerp(T,F),I=r.lerp(p,F);d.x==$.x?K.y<=I.y&&I.y<=e.y&&(g.$62l=s,g.$56l(I)):d.y==$.y?K.x<=I.x&&I.x<=e.x&&(g.$62l=s,g.$56l(I)):I.gte(K)&&I.lte(e)&&(g.$62l=s,g.$56l(I))}}return g},lc=function(P,h,E,q,i,z){var R=i.min(z),n=i.max(z),J=new Uj(n.x,R.y),w=new Uj(R.x,n.y),$=Xh(P,h,E,q,R,J),W=Xh(P,h,E,q,J,n),Q=Xh(P,h,E,q,n,w),B=Xh(P,h,E,q,w,R),H=new kn(C);return H.$57l($.points),H.$57l(W.points),H.$57l(Q.points),H.$57l(B.points),H.points.length>0&&(H.$62l=s),H},mh=function(B,z,L,_){var U=L.min(_),u=L.max(_),K=new Uj(u.x,U.y),b=new Uj(U.x,u.y),v=fl(U,K,B,z),T=fl(K,u,B,z),j=fl(u,b,B,z),S=fl(b,U,B,z),r=new kn(C);return r.$57l(v.points),r.$57l(T.points),r.$57l(j.points),r.$57l(S.points),r.points.length>0&&(r.$62l=s),r},hn=y.XEditInteractor=function(F){var b=this,O=b._view=document.createElement("canvas");O.className="editCanvas",O.style.position="absolute",hn.superClass.constructor.call(b,F)};V.def(hn,y.Interactor,{ms_edit:1,setUp:function(){var q=this,o=q.gv,R=o.getView(),l=q._view;hn.superClass.setUp.call(q),o.setEditInteractor(q),o.$14l=l,o._79O?R.insertBefore(l,o._79O):R.appendChild(l);var V=q.$49l=q.$11l.bind(q);o.dm().md(V),o.sm().ms(V),o.mp(V)},tearDown:function(){var u=this,q=u.gv,c=q.getView(),R=u.$49l;hn.superClass.tearDown.call(u),q.setEditInteractor(j),q.$14l=j,c.removeChild(u._view),q.dm().umd(R),q.sm().ums(R),q.ump(R)},clear:function(){var i=this,E=i.gv;delete i._hoverSegmentIndex,delete i._edge,delete i._shape,delete E._editing,delete i.$10l,delete i.$13l,delete i.$9l,delete i._removePointIndex,delete i._lp,i.$12l="",delete i.$40l,delete i.$67l,delete i.$72l,delete i.$73l,delete i.$75l,delete i.$1l,delete i.$3l,delete i.$2l,delete i.$92l,delete i.$93l,delete i.$94l,i.clearDragging()},handle_keydown:function(B){this.$48l!==B.shiftKey&&(this.$48l=B.shiftKey,this.handle_mousemove(B,A,!0))},handle_keyup:function(f){this.$48l!==f.shiftKey&&(this.$48l=f.shiftKey,this.handle_mousemove(f,A,!0))},handle_touchstart:function(Y){this.handle_mousemove(Y),this.handle_mousedown(Y)},handle_mousedown:function(R){G(R);var i=this,n=i.$13l,p=i.gv,Y=p.dm(),e=p.sm(),A=p.getZoom(),P=p.lp(R),l=V.isDoubleClick(R),W=V.isLeftButton(R),S=i.$7l,m=i._shape,B=i._hoverSegmentIndex,T=i._edge,X=i.$87l,d=i.$88l,$=function(){i._68I||X===i.$87l&&d===i.$88l||i.$43l()};if(7!==i.$67l&&(delete i.$87l,delete i.$88l),W&&(m||T)&&B>=0&&l&&(m&&e.contains(m)||T&&e.contains(T))){var b=Um.call(i,m||T,B,P);return i.addShapePoint(m||T,B,b),u(function(){i.handle_mousemove(R)},40),void 0}if(W&&(m||T)&&i._removePointIndex>=0&&l)return i.removeShapePoint(),i.$5l=1,u(function(){i.handle_mousemove(R)},40),void 0;if(!W||!p._editing)return $(),void 0;if(m&&n>=0){var c=m.getPoints().get(n),j=m.p(),C=Wo(j,c.x-j.x,c.y-j.y,-S+m.getRotation());f=Wo(j,P.x-j.x,P.y-j.y,-S),i.$24l={x:f.x-C.x,y:f.y-C.y},i.startDragging(R),Y.beginTransaction(),i.fi({kind:"beginEditPoint",event:R,data:m,index:n}),i.$88l=n,i.$87l=m}else if(i.$10l){var N=p.sm().getSelection(),H=i.$6l,K=i.$1l={},o=i.$3l={},U=i.$16l[x[i.$10l]],F={x:H.x,y:H.y},L={x:H.x+H.width/2,y:H.y+H.height/2};i.$24l={x:P.x-U.x/A,y:P.y-U.y/A},i.$2l=_(i.$8l),i.$4l=_(H),N.each(function(v){if(v instanceof t){var Q=v.p(),J=v.getWidth(),W=v.getHeight(),M=Wo(L,Q.x-L.x,Q.y-L.y,-S);K[v.getId()]={x:Q.x-J/2,y:Q.y-W/2,width:J,height:W},o[v.getId()]={x:(M.x-F.x)/H.width,y:(M.y-F.y)/H.height}}}),i.startDragging(R),Y.beginTransaction(),i.fi({kind:"beginEditRect",event:R,direction:i.$10l})}else if(T&&n>=0){var q=ze(p.getDataUI(T),T.s("edge.points")),c=q.get(n);i.$24l={x:P.x-c.x,y:P.y-c.y},i.startDragging(R),Y.beginTransaction(),i.fi({kind:"beginEditPoint",event:R,data:T,index:n}),i.$88l=n,i.$87l=T}else if(i.$40l){var H=i.$6l,L={x:H.x+H.width/2,y:H.y+H.height/2},Z=_(i.$23l);Z.x/=A,Z.y/=A;var O=Wo(L,Z.x-L.x,Z.y-L.y,-S),f=Wo(L,P.x-L.x,P.y-L.y,-S);i.$24l={x:f.x-O.x,y:f.y-O.y},i.startDragging(R),Y.beginTransaction(),i.fi({kind:"beginEditRotation",event:R,data:i._rotationNode})}else if([1,2,3,5,6,7,8,9].indexOf(i.$67l)>=0){var w=i.$67l;(7===w||8===w||9===w)&&Y.beginTransaction(),i.startDragging(R)}else if(i.$71l&&l&&i.$79l(i.$71l,P)){var v=e.toSelection();Y.beginTransaction(),v.each(function(T){Y.remove(T)}),Y.endTransaction()}$()},$11l:function(){var h=this,E=h.gv;E._editing&&(h.$13l==j||h._shape==j&&h._edge==j)&&(h.$73l==j||1!==h.$67l&&5!==h.$67l&&6!==h.$67l)||(h.$5l=1),h._68I=1},$46l:function(H){var o=this,y=o.gv,d=y.lp(H),P=[];return en(y,function(Y){var I=y.getDataUI(Y);if(I){var H=I._79o();J(H,d)&&P.push(Y)}}),P},$47l:function(D){var a=this,V=a.$13l,h=a.gv.dm();a.$10l?(a.fi({kind:"endEditRect",event:D,direction:a.$10l}),h.endTransaction()):a._shape&&V>=0?(a.fi({kind:"endEditPoint",event:D,data:a._shape,index:V}),h.endTransaction()):a._edge&&V>=0?(a.fi({kind:"endEditPoint",event:D,data:a._edge,index:V}),h.endTransaction()):a.$23l&&a.$40l&&(a.fi({kind:"endEditRotation",event:D}),h.endTransaction())},handleWindowTouchEnd:function(J){this.handleWindowMouseUp(J)},handleWindowMouseUp:function(H){var D=this,k=D.gv,I=k.dm(),B=D._shape,i=D._edge,G=D.$13l,v=D.$40l,y=D.$9l,C=D.$10l,E=D.$67l;if((B||i)&&G>=0&&y>=0){var V,J;if(B){var O=B.p(),d=B.getRotation();V=B.getPoints(),J=V.get(y),Wp(B,O,d,G,J,!1)}else if(V=ze(k.getDataUI(i),i.s("edge.points"),!0),J=V.get(y),0===G){var R=V.get(0);i.s("edge.source.offset.x",J.x-R.x),i.s("edge.source.offset.y",J.y-R.y)}else if(G===V.size()-1){var n=V.get(V.size()-1);i.s("edge.target.offset.x",J.x-n.x),i.s("edge.target.offset.y",J.y-n.y)}else"points"===i.s("edge.type")&&(V.set(G,J),i.s("edge.points",ud(V)))}D.$47l(H);var q=D.$73l;1===E?(I.beginTransaction(),q?k.sm().each(function(s){if(s.setHost&&k.isHelperEditable(s,"host")){s.setHost(q);
var o=D.$75l,u=D.$74l;o&&(s.s("attach.row.index",o.rowIndex),s.s("attach.column.index",o.columnIndex)),u&&(s.s("attach.index",u.attachIndex),s.s("attach.offset",u.attachOffset),s.s("attach.offset.relative",!1),s.s("attach.offset.opposite",!1))}}):k.sm().each(function(F){F.setHost&&k.isHelperEditable(F,"host")&&(F.setHost(j),F.s("attach.row.index",A),F.s("attach.column.index",A),F.s("attach.index",A),F.s("attach.offset",A),F.s("attach.offset.relative",!1),F.s("attach.offset.opposite",!1))}),I.endTransaction()):2===E?(I.beginTransaction(),q?k.sm().each(function(G){G.setParent&&k.isHelperEditable(G,"parent")&&G.setParent(q)}):k.sm().each(function(R){R.setParent&&k.isHelperEditable(R,"parent")&&R.setParent(j)}),I.endTransaction()):3===E?q&&(I.beginTransaction(),k.sm().each(function(f){if(k.isHelperEditable(f,"edge")&&f instanceof t&&q instanceof t){var S=new r.Edge;I.add(S),S.setSource(f),S.setTarget(q),D.onEdgeCreated&&D.onEdgeCreated(H,S)}}),I.endTransaction()):5===E||6===E?q&&(I.beginTransaction(),k.sm().each(function(c){c instanceof Q&&q instanceof t&&(5===E&&k.isHelperEditable(c,"source")?c.setSource(q):6===E&&k.isHelperEditable(c,"source")&&c.setTarget(q))}),I.endTransaction()):(7===E||8===E||9===E)&&I.endTransaction(),(C||v)&&D.$43l(!0),w(H)?(D.clear(),delete D.$64l,D._68I||D.$43l()):(D.handle_mousemove(H,!0),E&&!D._68I&&D.$43l())},handleWindowTouchMove:function(g){this.handleWindowMouseMove(g)},handleWindowMouseMove:function(s){this._78I(s)},handle_mousemove:function(A,p,K){if(!this._pause){if(!K){var m=w(A)?qh(A):A;this.$61l={clientX:m.clientX,clientY:m.clientY}}if(p===!0||!X()){var F=this,b=F.gv,o=!1,l=j;F.clear(),b.sm().size()>0&&(l=b.lp(K?F.$61l:A),o=F._79I(A,l)),o&&(b._editing=1),F.$12l!==F.$65l&&(F.$65l=F.$12l,F.setCursor(F.$12l)),F.$40l!==F.$64l&&(F.$64l=F.$40l,F._68I||F.$43l()),F._hoverSegmentIndex!==F.$66l&&(F.$66l=F._hoverSegmentIndex,F._68I||F.$43l())}}},_78I:function($){this.autoScroll($);var E=this,S=E.gv,p=S.lp($),b=S.getZoom(),y=E.$13l;if((E._shape||E._edge)&&y>=0){var L,m,d,G=E._shape,a=E._edge,U=E.$24l,k=S.getPointSnapSpacing(),n=function(H,S){return k==j||isNaN(k)?{x:H,y:S}:{x:e(H/k)*k,y:e(S/k)*k}};if(G){L=G.getPoints();var A=G.p(),O=G.getRotation(),i=0;m=Wo(A,p.x-A.x,p.y-A.y,-O),Wp(G,A,O,y,p,!0,U,n),E.fi({kind:"betweenEditPoint",event:$,data:G,index:y})}else if(a){L=ze(S.getDataUI(a),a.s("edge.points"),!0),p.x-=U.x,p.y-=U.y,m=p;var X,W,z=a.s("edge.offset"),x=L.size(),l=x>2;if(0===y){var C=L.get(0);z&&(C=as(C,L.get(1),-z,l),p=as(p,L.get(1),-z,l)),X=p.x-C.x,W=p.y-C.y,d=n(X,W),a.s("edge.source.offset.x",d.x),a.s("edge.source.offset.y",d.y)}else if(y===x-1){var v=L.get(x-1);z&&(v=as(v,L.get(x-2),-z,l),p=as(p,L.get(x-2),-z,l)),X=p.x-v.x,W=p.y-v.y,d=n(X,W),a.s("edge.target.offset.x",d.x),a.s("edge.target.offset.y",d.y)}else"points"===a.s("edge.type")&&(d=n(p.x,p.y),d.e=L.get(y).e,L.set(y,d),a.s("edge.points",ud(L)));E.fi({kind:"betweenEditPoint",event:$,data:a,index:y})}if(delete E.$9l,S.isSnapPoint(G)||S.isSnapPoint(a))for(i=0;i<L.size();i++)if(i!==y){var Y=L.get(i);if(T(Y,m)<S.getEditPointSize()/b){E.$9l=i;break}}}else if(E.$10l){var U=E.$24l;p.x-=U.x,p.y-=U.y;var M=S.sm().getSelection(),B=E.$1l,N=E.$7l,r=E.$10l,J=E.$4l,h=E.$2l,Z=S.getEditRectPadding()/b,H=2*Z,_=S.getSnapSpacing(),s=_!=j&&!isNaN(_),o=we(h,p,r,N,2*Z,S.getResizeMode(),s,!0),w=E.$6l;if(s){var D=o.width-H,c=o.height-H,R=e(D/_)*_,xm=e(c/_)*_,Si=R-D,hq=xm-c;("west"===r||"northwest"===r||"southwest"===r)&&(Si=-Si),("north"===r||"northwest"===r||"northeast"===r)&&(hq=-hq),o=we(h,p,r,N,2*Z,S.getResizeMode(),s,!1,Si,hq)}E.$8l=o,w.x=o.x+Z,w.y=o.y+Z,w.width=o.width-H,w.height=o.height-H;var Jq=o.x+o.width/2,Hq=o.y+o.height/2,Ap=w.x,Aj=w.y,Oj=w.width/J.width,of=w.height/J.height;M.each(function(J){if(J instanceof t&&S.isEditable(J)&&S.isRectEditable(J)){var H=B[J.getId()],y=E.$3l[J.getId()],T={x:H.x+H.width/2,y:H.y+H.height/2},C=0,g=0,D=r,j=180*K(N-J.getRotation())/P;"northeast"===r?j>=315||45>j?(C=H.width*Oj+H.x,g=H.height*(1-of)+H.y,D="northeast"):j>=45&&135>j?(C=H.width*(1-of)+H.x,g=H.height*(1-Oj)+H.y,D="northwest"):j>=135&&225>j?(C=H.width*(1-Oj)+H.x,g=H.height*of+H.y,D="southwest"):(C=H.width*of+H.x,g=H.height*Oj+H.y,D="southeast"):"north"===r?j>=315||45>j?(g=H.height*(1-of)+H.y,D="north"):j>=45&&135>j?(C=H.width*(1-of)+H.x,D="west"):j>=135&&225>j?(g=H.height*of+H.y,D="south"):(C=H.width*of+H.x,D="east"):"northwest"===r?j>=315||45>j?(C=H.width*(1-Oj)+H.x,g=H.height*(1-of)+H.y,D="northwest"):j>=45&&135>j?(C=H.width*(1-of)+H.x,g=H.height*Oj+H.y,D="southwest"):j>=135&&225>j?(C=H.width*Oj+H.x,g=H.height*of+H.y,D="southeast"):(C=H.width*of+H.x,g=H.height*(1-Oj)+H.y,D="northeast"):"west"===r?j>=315||45>j?(C=H.width*(1-Oj)+H.x,D="west"):j>=45&&135>j?(g=H.height*Oj+H.y,D="south"):j>=135&&225>j?(C=H.width*Oj+H.x,D="east"):(g=H.height*(1-Oj)+H.y,D="north"):"southwest"===r?j>=315||45>j?(C=H.width*(1-Oj)+H.x,g=H.height*of+H.y,D="southwest"):j>=45&&135>j?(C=H.width*of+H.x,g=H.height*Oj+H.y,D="southeast"):j>=135&&225>j?(C=H.width*Oj+H.x,g=H.height*(1-of)+H.y,D="northeast"):(C=H.width*(1-of)+H.x,g=H.height*(1-Oj)+H.y,D="northwest"):"east"===r?j>=315||45>j?(C=H.width*Oj+H.x,D="east"):j>=45&&135>j?(g=H.height*(1-Oj)+H.y,D="north"):j>=135&&225>j?(C=H.width*(1-Oj)+H.x,D="west"):(g=H.height*Oj+H.y,D="south"):"south"===r?j>=315||45>j?(g=H.height*of+H.y,D="south"):j>=45&&135>j?(C=H.width*of+H.x,D="east"):j>=135&&225>j?(g=H.height*(1-of)+H.y,D="north"):(C=H.width*(1-of)+H.x,D="west"):"southeast"===r&&(j>=315||45>j?(C=H.width*Oj+H.x,g=H.height*of+H.y,D="southeast"):j>=45&&135>j?(C=H.width*of+H.x,g=H.height*(1-Oj)+H.y,D="northeast"):j>=135&&225>j?(C=H.width*(1-Oj)+H.x,g=H.height*(1-of)+H.y,D="northwest"):(C=H.width*(1-of)+H.x,g=H.height*Oj+H.y,D="southwest"));var Z=Wo(T,C-T.x,g-T.y,J.getRotation());so(J,H,D,{x:Z.x,y:Z.y});var z=Ap+w.width*y.x,Y=Aj+w.height*y.y,F={x:z,y:Y};F=Wo({x:Jq,y:Hq},F.x-Jq,F.y-Hq,N),J.p(F.x,F.y)}}),E.fi({kind:"betweenEditRect",event:$,direction:r})}else if(E.$23l&&E.$40l){var Gg=E.$8l,er=Gg.width,Od=Gg.height,A={x:Gg.x+er/2,y:Gg.y+Od/2},U=E.$24l,$j=E.$23l,El=$j.x/b-A.x,ge=$j.y/b-A.y,zo=F(El*El+ge*ge),Xk=Math.asin(U.x/zo),nb=S.sm().getSelection(),Kr=f+q(p.y-A.y,p.x-A.x)-Xk,Nc=S.getSnapAngle(),Kr=e(Kr/Nc)*Nc;0>Kr&&(Kr+=g);var ee=Kr-E.$7l,Rq=[A.x,0,A.y];nb.each(function(J){if(S.isEditable(J)&&S.isRotationEditable(J)&&S.isVisible(J)){var $=Mf(J.p3(),Rq),O=ng();Pg(O,-ee),J.setRotation(J.getRotation()+ee),fn($,O),J.p3(Rq[0]+$[0],Rq[1]+$[1],Rq[2]+$[2])}}),E.$7l=Kr,E.fi({kind:"betweenEditRotation",event:$})}else if([1,2,3,5,6].indexOf(E.$67l)>=0)E.$72l=$,E.$78l||(E.$78l=1,u(function(){V.isDragging()&&E.$43l(),delete E.$78l},12));else if(7===E.$67l){if(E.$87l instanceof I){var G=E.$87l,Lb=E.$88l,Zq=V.clone(G.getPoints().get(Lb)),$o=p.y-Zq.y;Zq.e||(Zq.e=0),E.$92l||(E.$92l=Zq.e),Zq.e=E.$92l-$o,G.setPoint(Lb,Zq)}else if(E.$87l instanceof Q){var a=E.$87l,Lb=E.$88l,L=ze(S.getDataUI(a),a.s("edge.points")),Zq=L.get(Lb),$o=p.y-Zq.y;Zq.e||(Zq.e=0),E.$92l||(E.$92l=Zq.e),Zq.e=E.$92l-$o,L.set(Lb,Zq),a.s("edge.points",ud(L))}}else if(8===E.$67l){var nb=S.sm().getSelection(),eh=E.$93l;eh||(eh=E.$93l={}),nb.each(function(d){if(d.p3){var w=d.p3(),C=eh[d.getId()];C==j&&(C=eh[d.getId()]=w[1]),d.p3([w[0],C-(p.y-E.$90l.y/b),w[2]])}})}else if(9===E.$67l){var nb=S.sm().getSelection(),ls=E.$94l;ls||(ls=E.$94l={}),nb.each(function(R){if(R.s3){var q=R.s3(),r=ls[R.getId()];r==j&&(r=ls[R.getId()]=q[1]);var L=r-(p.y-E.$91l.y/b);0>L&&(L=.01),R.s3([q[0],L,q[2]])}})}},$79l:function(k,t){var p=this,s=p.gv,E=s.getZoom(),_=s.getEditHelperSize(),o=k.x/E,C=k.y/E,X=_/E,S=X/2;return J({x:o-S,y:C-S,width:X,height:X},t)?!0:void 0},getHelperCursor:function(){return"crosshair"},_79I:function(S,z){for(var w=this,C=w.gv,f=C.getZoom(),R=C.getEditPointSize(),l=R/f,u=l/2,t=w.$46l(S),y=0;y<t.length;y++){var j,x,H=t[y],P=C.getDataUI(H);if(P&&P._55O){var s=P._55O;if(s._43O&&H instanceof Q){if(j=H.s("edge.points"),j=ze(P,j),x=H.s("edge.segments"),x&&x.size()||(x=Vn(j)),w.$42l(H,z,j._as,x,"edge"))return!0;if("points"===H.s("edge.type")&&w.$41l(H,z,j._as,x,"edge"))return}if(s._43O&&H instanceof I&&s.$15l&&s.$15l.length===H.getPoints().size()){if(j=s.$15l,x=H.getSegments(),x&&x.size()||(x=Vn(j)),w.$42l(H,z,j,x,"shape"))return!0;if(w.$41l(H,z,j,x,"shape"))return}}}if(w.$16l){var j,$=w.$16l,e=$[3].x-$[7].x,n=$[3].y-$[7].y,T=F(e*e+n*n),g=$[1].x-$[5].x,O=$[1].y-$[5].y,Z=F(g*g+O*O),_={x:z.x*f,y:z.y*f};if(w._80I(_,0,$[0],"northwest",T,Z)||w._80I(_,1,$[1],"north",T,Z)||w._80I(_,2,$[2],"northeast",T,Z)||w._80I(_,7,$[7],"west",T,Z)||w._80I(_,3,$[3],"east",T,Z)||w._80I(_,6,$[6],"southwest",T,Z)||w._80I(_,5,$[5],"south",T,Z)||w._80I(_,4,$[4],"southeast",T,Z))return!0}if(w.$23l){var V=w.$23l,D=V.x/f,c=V.y/f;if(J({x:D-u,y:c-u,width:l,height:l},z))return w.$40l=1,w.$12l=w.getHelperCursor("rotation")||"crosshair",!0}return w.$68l&&w.$79l(w.$68l,z)?(w.$67l=1,w.$12l=w.getHelperCursor("host")||"crosshair",!0):w.$69l&&w.$79l(w.$69l,z)?(w.$67l=2,w.$12l=w.getHelperCursor("parent")||"crosshair",!0):w.$70l&&w.$79l(w.$70l,z)?(w.$67l=3,w.$12l=w.getHelperCursor("edge")||"crosshair",!0):w.$71l&&w.$79l(w.$71l,z)?(w.$67l=4,w.$12l=w.getHelperCursor("remove")||"crosshair",!0):w.$82l&&w.$79l(w.$82l,z)?(w.$67l=5,w.$12l=w.getHelperCursor("source")||"crosshair",!0):w.$83l&&w.$79l(w.$83l,z)?(w.$67l=6,w.$12l=w.getHelperCursor("target")||"crosshair",!0):w._pointElevationHelperPoint&&w.$79l(w._pointElevationHelperPoint,z)?(w.$67l=7,w.$12l=w.getHelperCursor("pointElevation")||"crosshair",!0):w.$90l&&w.$79l(w.$90l,z)?(w.$67l=8,w.$12l=w.getHelperCursor("elevation")||"crosshair",!0):w.$91l&&w.$79l(w.$91l,z)?(w.$67l=9,w.$12l=w.getHelperCursor("tall")||"crosshair",!0):!1},_80I:function(S,s,V,o,X,x){var I=this,q=I.gv,k=q.getEditPointSize(),T=k/2,Z=q.sm(),m=q.isDirectionEditable;if(m&&1===Z.size()){var h=Z.ld();if(m=m.bind(q),h instanceof t){if(!m(h,o))return!1;if("east"===o){if(m(h,"northeast")&&m(h,"southeast")&&2*k>=x)return!1}else if("west"===o){if(m(h,"northwest")&&m(h,"southwest")&&2*k>=x)return!1}else if("north"===o){if(m(h,"northwest")&&m(h,"northeast")&&2*k>=X)return!1}else if("south"===o&&m(h,"southwest")&&m(h,"southeast")&&2*k>=X)return!1}}else{if(2*k>=X&&("north"===o||"south"===o))return!1;if(2*k>=x&&("east"===o||"west"===o))return!1}if(J({x:V.x-T,y:V.y-T,width:k,height:k},S)){if(I.$10l!==o){var B=180*I.$7l/P,F="";B>=337.5||22.5>B?F="north":B>=22.5&&67.5>B?F="northeast":B>=67.5&&112.5>B?F="east":B>=112.5&&157.5>B?F="southeast":B>=157.5&&202.5>B?F="south":B>=202.5&&247.5>B?F="southwest":B>=247.5&&292.5>B?F="west":B>=292.5&&337.5>B&&(F="northwest");var a=pk.indexOf(F),F=pk[s-(1-a)+8];switch(F){case"northwest":I.$12l="nwse-resize";break;case"northeast":I.$12l="nesw-resize";break;case"southwest":I.$12l="nesw-resize";break;case"southeast":I.$12l="nwse-resize";break;case"north":I.$12l="ns-resize";break;case"east":I.$12l="ew-resize";break;case"south":I.$12l="ns-resize";break;case"west":I.$12l="ew-resize"}I.$10l=o}return!0}return!1},$42l:function(C,s,$,z,v){var g,m=this,k=m.gv,G=k.getEditPointSize(),d=G/k.getZoom(),I=-1,E={x:s.x,y:s.y,width:0,height:0},N=function(f){"shape"===v?m._shape=C:m._edge=C,m._removePointIndex=f},U=function(f){"shape"===v?m._shape=C:m._edge=C,m.$13l=f,m.$12l="crosshair"};for(Y(E,d/2),I=$.length-1,g=z.size()-1;g>=0;g--){var X=z.get(g);if(1===X||2===X)I-=1;else if(3===X){var c=$[I-1];if(J(E,c))return U(I-1),!0;I-=2}else if(4===X){var F=$[I-1],q=$[I-2];if(J(E,F))return U(I-1),!0;if(J(E,q))return U(I-2),!0;I-=3}}for(I=$.length-1,g=z.size()-1;g>=0;g--){var X=z.get(g),n=$[I];if(J(E,n))return N(I),U(I),!0;1===X||2===X?I-=1:3===X?I-=2:4===X&&(I-=3)}return!1},$41l:function(F,L,S,Z,V){var K=this,G=K.gv,e=-1,N=0,j={x:L.x,y:L.y,width:0,height:0},O=function(I,Q){K._hoverSegmentIndex=Q,K._lp=L,"shape"===V?K._shape=F:K._edge=F};for(Y(j,G.getSegmentHoverWidth()/2/G.getZoom()),F instanceof I&&F.isClosePath()&&Z.indexOf(5)<0&&(Z=new k(Z._as),Z.add(5));N<Z.size();N++){var h=Z.get(N);if(1===h){var n=S[e],b=S[e+1];if(n){var z=mh(new Uj(n.x,n.y),new Uj(b.x,b.y),new Uj(j.x,j.y),new Uj(j.x+j.width,j.y+j.height));if(z.$62l===s&&z.points.length>0)return O(z,N),!0}e+=1}else if(2===h){var n=S[e],b=S[e+1],z=mh(new Uj(n.x,n.y),new Uj(b.x,b.y),new Uj(j.x,j.y),new Uj(j.x+j.width,j.y+j.height));if(z.$62l===s&&z.points.length>0)return O(z,N),!0;e+=1}else if(3===h){var n=S[e],A=S[e+1],r=S[e+2],z=kf(new Uj(n.x,n.y),new Uj(A.x,A.y),new Uj(r.x,r.y),new Uj(j.x,j.y),new Uj(j.x+j.width,j.y+j.height));if(z.$62l===s)return O(z,N),!0;e+=2}else if(4===h){var n=S[e],C=S[e+1],f=S[e+2],r=S[e+3],z=lc(new Uj(n.x,n.y),new Uj(C.x,C.y),new Uj(f.x,f.y),new Uj(r.x,r.y),new Uj(j.x,j.y),new Uj(j.x+j.width,j.y+j.height));if(z.$62l===s)return O(z,N),!0;e+=3}else if(5===h){var n=S[e],b=S[0];if(n){var z=mh(new Uj(n.x,n.y),new Uj(b.x,b.y),new Uj(j.x,j.y),new Uj(j.x+j.width,j.y+j.height));if(z.$62l===s&&z.points.length>0)return O(z,N),!0}}}return!1},addShapePoint:function(B,Z,q){var i=this,J=i.gv,G=J.dm();if(G.beginTransaction(),0===arguments.length&&(B=i._shape||i._edge,Z=i._hoverSegmentIndex,q=i._lp),B instanceof I||B instanceof Q){var j=$g(B,J.getDataUI(B),Z);if(!isNaN(Z)&&q&&!isNaN(j)){var f=q;if(B instanceof I){var e=B.p(),g=B.getRotation(),b=B.toSegments();b&&b.size()||(b=Vn(B.getPoints())),B.isClosePath()&&b.indexOf(5)<0&&(b=new k(b._as),b.add(5));var $=b.get(Z),n="addPoint",V="removePointAt";if(2===$||1===$){var r={x:f.x,y:f.y};b.add($,Z),r=Wo(e,r.x-e.x,r.y-e.y,-g),B[n](r,j+1)}else if(3===$){var T=B.getPoints(),h=T.get(j),Y=T.get(j+2),r={x:f.x,y:f.y};r=Wo(e,r.x-e.x,r.y-e.y,-g);var p=ye(h,r),P=ye(r,Y);b.removeAt(Z),b.add(3,Z),b.add(3,Z),B.setPoint(j+1,r),B[n](P,j+2),B[n](p,j+1)}else if(4===$){var T=B.getPoints(),h=T.get(j),Y=T.get(j+3),r={x:f.x,y:f.y};r=Wo(e,r.x-e.x,r.y-e.y,-g);var p=Hp(h,r),P=Xk(h,r),U=Hp(r,Y),D=Xk(r,Y);b.removeAt(Z),b.add(4,Z),b.add(4,Z),B[V](j+1),B[V](j+1),B[n](r,j+1),B[n](D,j+2),B[n](U,j+2),B[n](P,j+1),B[n](p,j+1)}else if(5===$){var r={x:f.x,y:f.y};b.add(2,Z),r=Wo(e,r.x-e.x,r.y-e.y,-g),B[n](r,j+1)}B.isClosePath()&&b.remove(5),B.setSegments(b);var K=B.getWidth(),o=B.getHeight(),X=B.p().x-K/2,s=B.p().y-o/2;X-=e.x,s-=e.y;var L=xf(B,{x:X,y:s,width:K,height:o},g,e);B.p(L.x,L.y)}else if(B instanceof Q){if("points"!==B.s("edge.type"))return G.endTransaction(),void 0;var T=B.s("edge.points");b=B.s("edge.segments"),T=ze(J.getDataUI(B),T),b&&b.size()||(b=Vn(T)),b=new k(b._as.slice(0)),T=new k(T._as.slice(0));var $=b.get(Z);if(2===$||1===$){var r={x:f.x,y:f.y};b.add($,Z),T.add(r,j+1)}else if(3===$){var h=T.get(j),Y=T.get(j+2),r={x:f.x,y:f.y},p=ye(h,r),P=ye(r,Y);b.removeAt(Z),b.add(3,Z),b.add(3,Z),T.set(j+1,r),T.add(P,j+2),T.add(p,j+1)}else if(4===$){var h=T.get(j),Y=T.get(j+3),r={x:f.x,y:f.y},p=Hp(h,r),P=Xk(h,r),U=Hp(r,Y),D=Xk(r,Y);b.removeAt(Z),b.add(4,Z),b.add(4,Z),T.removeAt(j+1),T.removeAt(j+1),T.add(r,j+1),T.add(D,j+2),T.add(U,j+2),T.add(P,j+1),T.add(p,j+1)}B.s("edge.points",ud(T)),B.s("edge.segments",b)}}}G.endTransaction()},removeShapePoint:function(Y,y){var R=this,q="removeAt",N=R.gv,v=N.dm();if(v.beginTransaction(),0===arguments.length&&(Y=R._shape||R._edge,y=R._removePointIndex),y>=0&&(Y instanceof I||Y instanceof Q)){var W=di(Y,R.gv.getDataUI(Y),y),T=y;if(Y instanceof I){var K=Y.p(),g=Y.toSegments();g&&g.size()||(g=Vn(Y.getPoints()));var b=g.get(W),r="removePointAt";if(1===b&&0===T)if(Y.getPoints().size()>1){var f=g.get(W+1);g[q](W+1),3===f?Y[r](T+1):4===f&&(Y[r](T+2),Y[r](T+1)),Y[r](T)}else Y.dm().remove(Y);else 2===b||1===b?(g[q](W),Y[r](T)):3===b?(g[q](W),Y[r](T),Y[r](T-1)):4===b&&(g[q](W),Y[r](T),Y[r](T-1),Y[r](T-2));Y.setSegments(g);var i=Y.getWidth(),n=Y.getHeight(),a=Y.p().x-i/2,t=Y.p().y-n/2;a-=K.x,t-=K.y;var P=xf(Y,{x:a,y:t,width:i,height:n},Y.getRotation(),K);Y.p(P.x,P.y)}else if(Y instanceof Q){if("points"!==Y.s("edge.type"))return v.endTransaction(),void 0;var J=Y.s("edge.points");if(g=Y.s("edge.segments"),J&&(J=ze(R.gv.getDataUI(Y),J),g&&g.size()||(g=Vn(J))),0===y||y===J.size()-1)return v.endTransaction(),void 0;g=new k(g._as.slice(0)),J=new k(J._as.slice(0));var b=g.get(W);2===b||1===b?(g[q](W),J[q](T)):3===b?(g[q](W),J[q](T),J[q](T-1)):4===b&&(g[q](W),J[q](T),J[q](T-1),J[q](T-2)),Y.s("edge.segments",g),Y.s("edge.points",ud(J))}}v.endTransaction()},changeShapeSegment:function(n,D,r){var c=this,d=c.gv,L=d.dm();if(L.beginTransaction(),1!==arguments.length||isNaN(n)||(r=n,n=c._shape||c._edge,D=c._hoverSegmentIndex),n instanceof I||n instanceof Q){var B=$g(n,c.gv.getDataUI(n),D);if(!isNaN(D)&&!isNaN(B))if(n instanceof I){var z=n.p(),j=n.toSegments();j&&j.size()||(j=Vn(n.getPoints()));var l=j.get(D),F=n.toPoints();if(1===r||2===r)1===l||2===l?j.set(D,r):3===l?(j.set(D,r),F.removeAt(B+1)):4===l&&(j.set(D,r),F.removeAt(B+1),F.removeAt(B+1));else if(3===r){var $=function(){var s=F.get(B),y=F.get(B+1),h=ye(s,y);j.set(D,3),F.add(h,B+1)};2===l||1===l?$():4===l&&(F.removeAt(B+1),F.removeAt(B+1),$())}else if(4===r){var q=function(){var x=F.get(B),U=F.get(B+1),w=Hp(x,U),P=Xk(x,U);j.set(D,4),F.add(w,B+1),F.add(P,B+2)};2===l||1===l?q():3===l&&(F.removeAt(B+1),q())}n.setSegments(j),n.setPoints(F);var i=n.getWidth(),w=n.getHeight(),A=n.p().x-i/2,P=n.p().y-w/2;A-=z.x,P-=z.y;var O=new xf(n,{x:A,y:P,width:i,height:w},n.getRotation(),z);n.p(O.x,O.y)}else if(n instanceof Q){if("points"!==n.s("edge.type"))return L.endTransaction(),void 0;var F=n.s("edge.points");j=n.s("edge.segments"),F&&(F=ze(c.gv.getDataUI(n),F),j&&j.size()||(j=Vn(F))),j=new k(j._as.slice(0)),F=new k(F._as.slice(0));var l=j.get(D);if(1===r||2===r)1===l||2===l?j.set(D,r):3===l?(j.set(D,r),F.removeAt(B+1)):4===l&&(j.set(D,r),F.removeAt(B+1),F.removeAt(B+1));else if(3===r){var $=function(){var s=F.get(B),J=F.get(B+1),P=ye(s,J);j.set(D,3),F.add(P,B+1)};2===l||1===l?$():4===l&&(F.removeAt(B+1),F.removeAt(B+1),$())}else if(4===r){var q=function(){var C=F.get(B),U=F.get(B+1),m=Hp(C,U),t=Xk(C,U);j.set(D,4),F.add(m,B+1),F.add(t,B+2)};2===l||1===l?q():3===l&&(F.removeAt(B+1),q())}n.s("edge.points",ud(F)),n.s("edge.segments",j)}}L.endTransaction()},getDefaultSegments:function(a){var z=this.gv,j=z.getDataUI(a);if(a instanceof Q){var h=a.s("edge.points");return h=ze(j,h),Vn(h)}if(a instanceof I){var h=a.getPoints(),U=a.getSegments();return U&&U.size()>0?U:Vn(h)}},$43l:function(d){var T=this;d&&(T.$5l=1),T._68I=1,T._42()},_42:function(){var l=this;if(l._68I){delete l._68I;var E=l.gv,y=l.$5l,o=E.getZoom(),K=E.getEditPointSize(),c=K/2,B=new k,Z=l._view,m=l._edge,s=l._shape,h=Z.getContext("2d"),N=E.tx(),X=E.ty(),J=j,e=E.getEditPointBackground(),T=E.getControlPointBackground(),f=E.getControlPointBorderColor(),i=E.getEditPointBorderColor(),u=E.getEditRectBorderColor(),w=E.getDirectionLineColor(),M=E.getSegmentHoverColor(),$=E.getSnapPointBorderColor(),p=E.getJoinPointBackground(),G=E.getJoinPointBorderColor(),P=E.getSegmentHoverWidth(),A=[5,5],v=E.getEditRectBorderStyle();Ef(E,function(m){E.isSelected(m)&&E.isVisible(m)&&B.add(m)}),h.clearRect(0,0,D(Z.width),D(Z.height)),h.save(),b.translateAndScale(h,N,X,1);var S=j,C={x:0,y:0,width:0,height:0},x=0,O=0,W=0,q=0,U=0,d=0,Yh=0,nl=0,vg=0,Rd=0,wf=[];if(y?(delete l.$6l,delete l.$8l,delete l.$7l,delete l.$16l,delete l.$23l):(S=l.$6l,J=l.$7l),delete l.$68l,delete l.$69l,delete l.$71l,delete l.$70l,delete l.$82l,delete l.$83l,delete l._pointElevationHelperPoint,delete l.$90l,delete l.$91l,delete l.$75l,delete l.$74l,B.each(function($){var A=E.getDataUI($);if(A){var k=A._55O;if(E.isEditable($))k._56O&&$ instanceof t&&O++,wf.push($),k._42O&&$ instanceof t&&x++,E.isHelperEditable($,"host")&&q++,E.isHelperEditable($,"parent")&&W++,E.isHelperEditable($,"remove")&&U++,E.isHelperEditable($,"edge")&&d++,E.isHelperEditable($,"source")&&Yh++,E.isHelperEditable($,"target")&&nl++,E.isHelperEditable($,"elevation")&&vg++,E.isHelperEditable($,"tall")&&Rd++;else if($ instanceof n&&$.isExpanded()){var R=!0,Q=E.getEditableFunc();Q&&(R=Q($)),R&&(E.isHelperEditable($,"host")&&q++,E.isHelperEditable($,"parent")&&W++,E.isHelperEditable($,"remove")&&U++,E.isHelperEditable($,"edge")&&d++,E.isHelperEditable($,"source")&&Yh++,E.isHelperEditable($,"target")&&nl++,E.isHelperEditable($,"elevation")&&vg++,E.isHelperEditable($,"tall")&&Rd++,wf.push($))}}}),h.beginPath(),h.lineWidth=1,h.strokeStyle=E.getNodeBorderColor(),wf.forEach(function(P){var Z=E.getDataUI(P),i=Z._55O;if(y)if(J==j&&(J=P instanceof Q?0:P instanceof n&&P.isExpanded()?0:P.getRotation(),l.$7l=J),S==j){var D,d,G;if(P instanceof n&&P.isExpanded()||P instanceof Q){var s=E.getDataUIBounds(P);d=s.width,G=s.height,D={x:s.x+d/2,y:s.y+G/2}}else D=P.p(),d=P.getWidth(),G=P.getHeight();S={x:D.x,y:D.y,width:0,height:0},C.x=D.x-d/2,C.y=D.y-G/2,C.width=d,C.height=G,S=L(S,C)}else{var D,d,G,b,A=S.x+S.width/2,Y=S.y+S.height/2,V={x:A,y:Y};if(P instanceof n&&P.isExpanded()||P instanceof Q){b=0;var s=E.getDataUIBounds(P);d=s.width,G=s.height,D={x:s.x+d/2,y:s.y+G/2}}else D=P.p(),d=P.getWidth(),G=P.getHeight(),b=P.getRotation();var R={x:D.x-d/2,y:D.y-G/2,width:d,height:G},M={x:R.x,y:R.y},p={x:R.x+R.width,y:R.y},v={x:R.x,y:R.y+R.height},_={x:R.x+R.width,y:R.y+R.height},M=Wo(D,M.x-D.x,M.y-D.y,b),v=Wo(D,v.x-D.x,v.y-D.y,b),_=Wo(D,_.x-D.x,_.y-D.y,b),p=Wo(D,p.x-D.x,p.y-D.y,b),H=-J,e=Wo(V,M.x-V.x,M.y-V.y,H),w=Wo(V,p.x-V.x,p.y-V.y,H),g=Wo(V,v.x-V.x,v.y-V.y,H),N=Wo(V,_.x-V.x,_.y-V.y,H),I=z([e,w,g,N]);S=L(S,I),S.x-=A,S.y-=Y;var O=xf(j,S,J,V);S.x=O.x-S.width/2,S.y=O.y-S.height/2}if(x>1&&E.isEditable(P)&&E.isRectEditable(P)&&P instanceof t){var F=P.getRect(),B=i.$45l,c=Md(B[0],o),m=Md(B[2],o),U=Md(B[4],o),r=Md(B[6],o);P.getRotation()?(h.moveTo(c.x,c.y),h.lineTo(m.x,m.y),h.lineTo(U.x,U.y),h.lineTo(r.x,r.y),h.lineTo(c.x,c.y)):h.rect(F.x*o,F.y*o,F.width*o,F.height*o)}}),h.stroke(),S){l.$6l=_(S),Y(S,E.getEditRectPadding()/o);var nf={x:S.x+S.width/2,y:S.y+S.height/2},ne=Yr(nf,S.width,S.height,J),ek=ne[0],gi=ne[1],qs=ne[2],eg=ne[3],ic=ne[4],Pq=ne[5],fn=ne[6],Ub=ne[7];if(ek=Md(ne[0],o),gi=Md(ne[1],o),qs=Md(ne[2],o),eg=Md(ne[3],o),ic=Md(ne[4],o),Pq=Md(ne[5],o),fn=Md(ne[6],o),Ub=Md(ne[7],o),l.$8l=S,x>0&&(l.$16l=[ek,ic,gi,Pq,eg,fn,qs,Ub],h.beginPath(),h.lineWidth=1,h.strokeStyle=u,"dashed"===v&&h.setLineDash&&h.setLineDash(A),h.moveTo(ek.x,ek.y),h.lineTo(gi.x,gi.y),h.lineTo(eg.x,eg.y),h.lineTo(qs.x,qs.y),h.lineTo(ek.x,ek.y),h.stroke(),"dashed"===v&&h.setLineDash&&h.setLineDash([])),h.beginPath(),h.lineWidth=1,h.fillStyle=e,h.strokeStyle=i,x>0){var Zi=Pq.x-Ub.x,Nc=Pq.y-Ub.y,$k=F(Zi*Zi+Nc*Nc),ub=ic.x-fn.x,jo=ic.y-fn.y,kq=F(ub*ub+jo*jo),Yg=2*K;if(E.isDirectionEditable&&1===wf.length){var Be=wf[0],Dd=E.getDataUI(Be),ip=Dd._55O,io=E.isDirectionEditable.bind(E);if(ip._42O){var Bi,cn,Xg,Lf;io(Be,"northwest")&&(Bi=!0,h.rect(ek.x-c,ek.y-c,K,K)),io(Be,"northeast")&&(cn=!0,h.rect(gi.x-c,gi.y-c,K,K)),io(Be,"southwest")&&(Xg=!0,h.rect(qs.x-c,qs.y-c,K,K)),io(Be,"southeast")&&(Lf=!0,h.rect(eg.x-c,eg.y-c,K,K)),io(Be,"north")&&(Bi&&cn?$k>Yg&&h.rect(ic.x-c,ic.y-c,K,K):h.rect(ic.x-c,ic.y-c,K,K)),io(Be,"south")&&(Lf&&Xg?$k>Yg&&h.rect(fn.x-c,fn.y-c,K,K):h.rect(fn.x-c,fn.y-c,K,K)),io(Be,"west")&&(Xg&&Bi?kq>Yg&&h.rect(Ub.x-c,Ub.y-c,K,K):h.rect(Ub.x-c,Ub.y-c,K,K)),io(Be,"east")&&(Lf&&cn?kq>Yg&&h.rect(Pq.x-c,Pq.y-c,K,K):h.rect(Pq.x-c,Pq.y-c,K,K))}}else $k>Yg&&(h.rect(ic.x-c,ic.y-c,K,K),h.rect(fn.x-c,fn.y-c,K,K)),kq>Yg&&(h.rect(Pq.x-c,Pq.y-c,K,K),h.rect(Ub.x-c,Ub.y-c,K,K)),h.rect(ek.x-c,ek.y-c,K,K),h.rect(gi.x-c,gi.y-c,K,K),h.rect(qs.x-c,qs.y-c,K,K),h.rect(eg.x-c,eg.y-c,K,K)}if(O>0){var ci=l.$23l=Wo(ic,0,2*-K,J);h.moveTo(ci.x+c,ci.y),h.arc(ci.x,ci.y,c,0,g,!1)}h.fill(),h.stroke(),l.$40l&&l.$44l(h,S,J);var Aq,pl,Qn=E.getLeftTopHelpers(),jf=E.getRightTopHelpers(),hi=E.getLeftBottomHelpers(),xm=E.getRightBottomHelpers(),lo=E.getEdgeHelpers(),Il=E.getEditHelperSize(),Qg=Il/2,Wj=function(A,V,D,m){"leftTop"===V?(Aq=S.x*o-Il-c-("h"===m?D*(Il+c):0)-1,pl=S.y*o-Il-c-("v"===m?D*(Il+c):0)-1):"rightTop"===V?(Aq=(S.x+S.width)*o+c+("h"===m?D*(Il+c):0)+1,pl=S.y*o-Il-c-("v"===m?D*(Il+c):0)-1):"leftBottom"===V?(Aq=S.x*o-Il-c-("h"===m?D*(Il+c):0)-1,pl=(S.y+S.height)*o+c+("v"===m?D*(Il+c):0)+1):"rightBottom"===V&&(Aq=(S.x+S.width)*o+c+("h"===m?D*(Il+c):0)+1,pl=(S.y+S.height)*o+c+("v"===m?D*(Il+c):0)+1);var P=Aq+Qg,L=pl+Qg,C=(S.x+S.width/2)*o,k=(S.y+S.height/2)*o,_=Wo({x:C,y:k},P-C,L-k,J);if("host"===A){if(q>0)return l.$77l(h,J,_),!0}else if("edge"===A){if(d>0)return l.$80l(h,J,_),!0}else if("remove"===A){if(U>0)return wf&&1===wf.length&&wf[0]instanceof Q?l.$81l(h,J,{x:C+Il/2+5,y:k}):l.$81l(h,J,_),!0}else if("parent"===A){if(W>0)return wf&&1===wf.length&&wf[0]instanceof Q?l.$76l(h,J,{x:C-Il/2-5,y:k}):l.$76l(h,J,_),!0}else if("elevation"===A){if(vg>0)return l.$85l(h,J,_),!0}else if("tall"===A){if(Rd>0)return l.$86l(h,J,_),!0}else if("source"===A||"target"===A){var w=wf[0],x=E.getDataUI(w),X=gn(x,!0),I=X[0],H=X[1];if(Yh&&"source"===A)return l.$84l(h,S,I,!0,w.isLooped(),V,D,m),!0;if(nl&&"target"===A)return l.$84l(h,S,H,!1,w.isLooped(),V,D,m),!0}};if(Qn&&Qn.length>0){var Dj=0;Qn.forEach(function(p){Wj(p,"leftTop",Dj,E.getLeftTopHelpersAlign()||"h")&&Dj++})}if(jf&&jf.length>0){var Dj=0;jf.forEach(function(i){Wj(i,"rightTop",Dj,E.getRightTopHelpersAlign()||"h")&&Dj++})}if(hi&&hi.length>0){var Dj=0;hi.forEach(function(K){Wj(K,"leftBottom",Dj,E.getLeftBottomHelpersAlign()||"h")&&Dj++})}if(xm&&xm.length>0){var Dj=0;xm.forEach(function(l){Wj(l,"rightBottom",Dj,E.getRightBottomHelpersAlign()||"h")&&Dj++})}if(lo&&lo.length>0&&((Yh||nl)&&wf&&1===wf.length&&wf[0]instanceof Q?!0:!1)){var Dj=0;lo.forEach(function(f){Wj(f,"edge",Dj,"h")&&Dj++})}if(l.$72l){var _m,Wd=l.$67l,Df=l.$68l,ue=l.$69l,ud=(l.$71l,l.$70l),Ho=l.$82l,aj=l.$83l;if(1===Wd?_m=Df:2===Wd?_m=ue:3===Wd?_m=ud:5===Wd?_m=Ho:6===Wd&&(_m=aj),_m){var Ve=E.lp(l.$72l),ob=E.getDataAt(l.$72l);if(ob&&ob instanceof t){var ji,Hi,bq;if(l.$73l=ob,1===Wd)if(ob instanceof r.Grid)ji=l.$75l=Xo(ob,Ve);else if(ob instanceof r.Shape){bq=l.$74l=yr(ob,Ve);var xo=ob.getPoints();if(bq){var se=bq.attachIndex,tb=$g(ob,E.getDataUI(ob),se)+1,md=tb+1>=xo.size()?0:tb+1,ph=xo.get(tb),Bg=xo.get(md),ge=ob.p(),Ml=ob.getRotation();ph=Wo(ge,ph.x-ge.x,ph.y-ge.y,Ml),Bg=Wo(ge,Bg.x-ge.x,Bg.y-ge.y,Ml),h.beginPath(),h.strokeStyle=M,h.lineWidth=P,h.moveTo(ph.x*o,ph.y*o),h.lineTo(Bg.x*o,Bg.y*o),h.stroke()}}ji?Hi=ji.rect:(Hi=V.clone(E.getDataUIBounds(ob)),V.grow(Hi,2)),h.beginPath(),h.rect(Hi.x*o,Hi.y*o,Hi.width*o,Hi.height*o),h.strokeStyle=1===Wd||4===Wd||6===Wd?a:H,h.lineWidth=2,h.setLineDash&&h.setLineDash([8,8]),h.stroke()}else delete l.$73l;Ve.x=Ve.x*o,Ve.y=Ve.y*o;var Gj=dg(_m.x,_m.y,Ve.x,Ve.y),ol=Wo(_m,Ve.x-_m.x,Ve.y-_m.y,-Gj),Ki=ol.x-_m.x;h.save(),h.translate(_m.x,_m.y),h.rotate(Gj),R.width=Ki,R.height=40;var ei=H;(1===Wd||4===Wd||6===Wd)&&(ei=a),R.comps[0].gradientColor=ei,V.drawImage(h,R,0,-20,Ki,40),h.restore()}}}if(B.each(function(t){var L=E.getDataUI(t);if(L){var D,X,W=L._55O,Z=L._78o;if(W&&W._43O&&t instanceof I?(D=W.$15l,X=t.getSegments(),X&&X.size()||(X=Vn(D)),t.isClosePath()&&X.indexOf(5)<0&&(X=new k(X._as),X.add(5))):W&&Z&&W._43O&&(D=t.s("edge.points"),X=t.s("edge.segments"),D=ze(L,D),X&&X.size()||(X=Vn(D)),D&&(D=D._as)),D&&X){var d=0,R=X.size(),K=l._hoverSegmentIndex;D=D.slice(0);for(var x=0;x<D.length;x++)D[x]=Md(D[x],o);h.beginPath(),h.strokeStyle=w,h.lineWidth=1,d=0;for(var x=0;R>x;x++){var n=X.get(x);if(1===n||2===n)d++;else if(3===n){var F=D[d-1],N=D[d],y=D[d+1];h.moveTo(F.x,F.y),h.lineTo(N.x,N.y),h.lineTo(y.x,y.y),d+=2}else if(4===n){var F=D[d-1],_=D[d],v=D[d+1],y=D[d+2];h.moveTo(F.x,F.y),h.lineTo(_.x,_.y),h.moveTo(v.x,v.y),h.lineTo(y.x,y.y),d+=3}}if(h.stroke(),s===t||m===t&&"points"===m.s("edge.type")){h.beginPath(),d=0,h.strokeStyle=M,h.lineWidth=P;for(var x=0;R>x;x++){var n=X.get(x);if(1===n||2===n){if(K===x){var F=D[d-1],y=D[d];h.moveTo(F.x,F.y),h.lineTo(y.x,y.y);break}d++}else if(3===n){if(K===x){var F=D[d-1],N=D[d],y=D[d+1];h.moveTo(F.x,F.y),h.quadraticCurveTo(N.x,N.y,y.x,y.y);break}d+=2}else if(4===n){if(K===x){var F=D[d-1],_=D[d],v=D[d+1],y=D[d+2];h.moveTo(F.x,F.y),h.bezierCurveTo(_.x,_.y,v.x,v.y,y.x,y.y);break}d+=3}else if(5===n&&K===x){var F=D[d-1],y=D[0];h.moveTo(F.x,F.y),h.lineTo(y.x,y.y);break}}h.stroke()}h.beginPath(),d=0,h.strokeStyle=G,h.lineWidth=1,h.fillStyle=p;for(var x=0;R>x;x++){var n=X.get(x);if(1===n||2===n){var y=D[d];h.moveTo(y.x+c,y.y),h.arc(y.x,y.y,c,0,g,!0),d++}else if(3===n){var y=D[d+1];h.moveTo(y.x+c,y.y),h.arc(y.x,y.y,c,0,g,!0),d+=2}else if(4===n){var y=D[d+2];h.moveTo(y.x+c,y.y),h.arc(y.x,y.y,c,0,g,!0),d+=3}}h.fill(),h.stroke(),h.beginPath(),d=0,h.strokeStyle=f,h.lineWidth=1,h.fillStyle=T;for(var x=0;R>x;x++){var n=X.get(x);if(1===n||2===n)d++;else if(3===n){var N=D[d];h.moveTo(N.x+c,N.y),h.arc(N.x,N.y,c,0,g,!0),d+=2}else if(4===n){var _=D[d],v=D[d+1];h.moveTo(_.x+c,_.y),h.arc(_.x,_.y,c,0,g,!0),h.moveTo(v.x+c,v.y),h.arc(v.x,v.y,c,0,g,!0),d+=3}}if(h.fill(),h.stroke(),h.beginPath(),d=0,h.strokeStyle=$,h.lineWidth=2,(s===t||m===t)&&l.$9l!=j){var y=D[l.$9l];h.moveTo(y.x+c,y.y),h.arc(y.x,y.y,c,0,g,!0),h.stroke()}}}}),l.$87l&&E.sm().contains(l.$87l)){var sk,em=l.$87l,jh=l.$88l,Il=E.getEditHelperSize(),Qg=Il/2;if(E.isHelperEditable(em,"pointElevation"))if(em instanceof I){var mh=em.getPosition();sk=V.clone(em.getPoints().get(jh)),sk=Wo({x:mh.x,y:mh.y},sk.x-mh.x,sk.y-mh.y,em.getRotation()),sk.x*=o,sk.y*=o,h.translate(sk.x,sk.y),V.drawImage(h,V.getImage("xeditinteractor_elevationIcon"),Qg,-Qg,Il,Il),h.translate(-sk.x,-sk.y),l._pointElevationHelperPoint={x:sk.x+Il,y:sk.y}}else if(em instanceof Q){var qh=ze(E.getDataUI(em),em.s("edge.points")),sk=V.clone(qh.get(jh));sk.x*=o,sk.y*=o,h.translate(sk.x,sk.y),V.drawImage(h,V.getImage("xeditinteractor_elevationIcon"),Qg,-Qg,Il,Il),h.translate(-sk.x,-sk.y),l._pointElevationHelperPoint={x:sk.x+Il,y:sk.y}}}h.restore(),l.$5l=0}},$89l:function(D,B,q,s){D.save();var w=this,z=w.gv,e=z.getEditHelperSize(),R=e/2;D.beginPath(),D.translate(q.x,q.y),D.rotate(B),V.drawImage(D,s,-R,-R,e,e),D.restore()},$85l:function(y,q,e){var w=this;w.$90l=e,w.$89l(y,q,e,V.getImage("xeditinteractor_elevationIcon"))},$86l:function(S,y,R){var p=this;p.$91l=R,p.$89l(S,y,R,V.getImage("xeditinteractor_tallIcon"))},$77l:function(q,A,w){var m=this;m.$68l=w,m.$89l(q,A,w,V.getImage("xeditinteractor_hostIcon"))},$80l:function(O,G,s){var P=this;P.$70l=s,P.$89l(O,G,s,V.getImage("xeditinteractor_edgeIcon"))},$81l:function(u,i,k){var X=this;X.$71l=k,X.$89l(u,i,k,V.getImage("xeditinteractor_removeIcon"))},$76l:function(N,m,e){var L=this;L.$69l=e,L.$89l(N,m,e,V.getImage("xeditinteractor_parentIcon"))},$84l:function(P,G,t,K,l){var d,p=this,r=p.gv,J=r.getZoom(),u=r.getEditHelperSize(),S=u/2;t.x*=J,t.y*=J,l&&(K?t.x-=S+5:t.x+=S+5),t.y-=u-2,K?(p.$82l=t,d=V.getImage("xeditinteractor_sourceIcon")):(p.$83l=t,d=V.getImage("xeditinteractor_targetIcon")),P.beginPath(),P.translate(t.x,t.y),V.drawImage(P,d,-S,-S,u,u),P.translate(-t.x,-t.y)},$44l:function($,x,C){$.save();var L=this.gv.getZoom(),Y=F(p(x.width,2)+p(x.height,2))/2*L+10,m=Y,B=m+8,G=m+18,t=C,n=x.x+x.width/2,u=x.y+x.height/2;$.translate(n*L,u*L),$.beginPath(),$.strokeStyle="rgb(150, 150, 150)";for(var S=0,o=0,X=0,s=0,b=0,W=0;360>W;W++)S=W*P/180,0===W%5&&(o=U(S)*m,X=c(S)*m,s=U(S)*B,b=c(S)*B,$.moveTo(o,X),$.lineTo(s,b)),0===W%45&&(o=U(S)*m,X=c(S)*m,s=U(S)*G,b=c(S)*G,$.moveTo(o,X),$.lineTo(s,b));$.stroke(),$.beginPath(),$.rotate(-f),$.beginPath(),$.fillStyle="rgba(255, 0, 0, 0.1)",$.strokeStyle="rgb(157, 157, 157)",$.moveTo(0,0),$.arc(0,0,G,0,C,!1),$.fill(),$.beginPath(),$.moveTo(0+G,0),$.arc(0,0,G,0,C,!1),$.stroke(),$.rotate(f),$.font="bold 12px Verdana, Arial";var N=20*c(t),i=20*U(t),H=e(180*t/P)+"°";$.textAlign="center",$.textBaseline="middle",$.beginPath();var I=$.measureText("365.°").width;$.fillStyle="white",$.rect(N-I/2,-i-10,I,20),$.fill(),$.beginPath(),$.fillStyle="rgb(79,79,79)",$.fillText(H,N,-i),$.restore()}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
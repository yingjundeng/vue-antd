!function(n,c){"use strict";var M="ht",X=n[M],Q="position",z="absolute",t="px",f="left",w="top",r="innerHTML",p="className",u="width",G="height",J="0",K="display",b="none",V="visibility",s="user-select",y="margin",o="padding",_=null,L=X.Color,N=X.Default,g=N.getInternal(),Z=n.setTimeout,d=n.setInterval,O=n.clearTimeout,v=n.clearInterval,E=n.parseInt,W=N.isLeftButton,C=N.isDragging,h=N.startDragging,x=N.getDistance,q=N.isTouchable,i=N.isTouchEvent,a=N.getPagePoint,l=N.isRightButton,j=L.widgetIconHighlight,U=L.widgetIconBorder,D=L.widgetIconGradient,H=function(){return document},A=function(L,B){return L.querySelectorAll(B)},T=function(g){var k=H().createElement(g);return"ul"===g&&(P(k,Q,"relative"),P(k,y,J),P(k,o,J),P(k,"list-style",b),P(k,"box-sizing","border-box"),P(k,"-moz-box-sizing","border-box"),P(k,K,"inline-block"),P(k,"vertical-align","text-bottom"),P(k,"border","1px solid "+N.contextMenuBorderColor),P(k,"box-shadow","0 0 16px 1px "+N.contextMenuShadowColor),P(k,"overflow","hidden"),N.contextMenuBorderRadius&&P(k,"border-radius",N.contextMenuBorderRadius+t)),k},B=function(m){var r=m.touches[0];return r?r:m.changedTouches[0]},R=function(){return T("div")},$=function(){return T("canvas")},P=function(E,v,q){E.style.setProperty(v,q,_)},Y=function(k,x,U){N.def(X.widget[k],x,U)},F=function(z,N){z.appendChild(N)},e=function(c,V){c.removeChild(V)},m=g.addEventListener,I=g.removeEventListener;g.addMethod(N,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:U},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:j}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:U},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:j,gradient:N.imageGradient,gradientColor:D,background:j}]},contextMenuLabelFont:(q?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var S=function(C){var U=this,S=C._view;U.$11b=C,U.addListeners(),m(S,"contextmenu",function(N){N.preventDefault()});var e=U.$37b=U.$36b.bind(U);m(S,"mouseover",e),m(S,"mouseout",e)};N.def(S,c,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(l){if(N.preventDefault(l),W(l)){for(var w=this,M=w.$11b,V=w.getView(),Q=V.children,F=0;F<Q.length;F++){var c=Q[F],A=c.$24b,O=c.$25b;if(A&&A.contains(l.target))return M.scrollUp(c),w.$28b=Z(function(){w.$29b=d(function(){M.scrollUp(c)},100)},500),h(w,l),void 0;if(O&&O.contains(l.target))return M.scrollDown(c),w.$28b=Z(function(){w.$29b=d(function(){M.scrollDown(c)},100)},500),h(w,l),void 0}w.$30b=a(l)}},handle_mousedown:function(h){this.handle_touchstart(h)},handle_touchend:function(P){if(W(P)){var d=this,M=d.$30b,F=i(P)?{x:B(P).pageX,y:B(P).pageY}:{x:P.pageX,y:P.pageY};if(!M||x(M,F)>1)return delete d.$30b,void 0;for(var T=d.getView(),Y=d.$11b,H=P.target,s=_,c=_,X=Y._items,z=T.$26b,w=0;w<z.length;w++)if(c=z[w],c.contains(H)){s=c.getAttribute("data-id");break}if(s&&X){var q=Y.$17b(X,function(A){return A._id===s});if(q){var G=!1;q.disabled instanceof Function?G=q.disabled.call(Y,q):q.disabled===!0&&(G=!0),G||(q.items?i(P)&&d.$36b(c,!0):Y.$1b(q,P))}}delete d.$30b}},$36b:function(e,n){if(!C()){var Z,X=this,b=X.$11b,k=X.getView(),U=b.$20b||k.children[0],R=b.$19b,F=k.$26b,Y=k.children,j=e.target,J=k.getBoundingClientRect(),m=N.getWindowInfo(),x=m.width,s=m.height,D=function(o){for(var m=0;m<Y.length;m++){var V=Y[m],q=new RegExp(o+"$"),M=V[p];if(M&&(q.test(M)||M.indexOf(o+" ")>=0))return V}},L=function(V){for(var m=0;m<F.length;m++){var k=F[m],U=new RegExp(V+"$"),K=k[p];if(K&&(U.test(K)||K.indexOf(V+" ")>=0))return k}},l=function(Z){var a=L("menu-item"+Z.$45b),O=a.getBoundingClientRect(),m=O.top-J.top,B=O.left-J.left;P(Z,w,m+t),P(Z,f,B+O.width+t);var S=Z.getBoundingClientRect(),p=S.top,K=S.left,R=S.height,h=S.width,e=p+R+2,M=K+h+2;e>s&&P(Z,w,m+s-e+t),M>x&&P(Z,f,B-h+t)};if(n)Z=e;else{if("mouseover"===e.type){for(var I=0;I<F.length;I++){var H=F[I];if(H.contains(j)){Z=H;break}}if(!Z&&R){var o=R.parentNode,y=D("submenu"+R.getAttribute("data-id"));(y&&y.contains(j)||o&&o.contains(j))&&(Z=R)}}else if("mouseout"===e.type){for(var M=!1,W=e.relatedTarget,I=0;I<Y.length;I++){var A=Y[I];if("hidden"!==A.style.visibility&&A.contains(W)){M=!0;break}}if(M)return}!Z&&U&&(Z=L("menu-item"+(U.$45b||"NaN")))}if(Z!=R){if(R)for(var O=R;O;){if(O[p]=O[p].replace(" menu-item-hover",""),O[p].indexOf("disabled")<0){var u=b.getItemByProperty("_id",O.getAttribute("data-id"));null!=u.background?u.background instanceof Function?P(O,"background-color",u.background.call(b,u)):P(O,"background-color",u.background):P(O,"background-color",N.contextMenuBackground),P(O,"color",N.contextMenuLabelColor)}var G=D("submenu"+O.getAttribute("data-id"));G&&P(G,V,"hidden");var S=O.parentNode;O=L("menu-item"+(S.$45b||"NaN"))}if(Z){for(var c=Z,$=[];c;){c[p]+=" menu-item-hover",c[p].indexOf("disabled")<0&&(P(c,"background-color",N.contextMenuHoverBackground),P(c,"color",N.contextMenuHoverLabelColor));var z=D("submenu"+c.getAttribute("data-id"));z&&(P(z,V,"visible"),$.push(z));var S=c.parentNode;c=L("menu-item"+(S.$45b||"NaN"))}$.reverse(),$.forEach(function(E){l(E)})}}b.$19b=Z,b.$20b=Z?Z.parentNode:k.children[0]}},handle_mouseup:function(u){this.handle_touchend(u)},handleWindowTouchEnd:function(){var K=this;K.$28b!=_&&(O(K.$28b),delete K.$28b),K.$29b!=_&&(v(K.$29b),delete K.$29b),delete K.$34b,delete K.$30b,delete K.$35b},handleWindowMouseUp:function(C){this.handleWindowTouchEnd(C)},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(o){if(!C()&&W(o)){for(var R=this,j=R.getView().children,l=_,f=0;f<j.length;f++){var c=j[f];if(c.contains(o.target)){l=c;break}}var Z=R.$30b,q=i(o)?{x:B(o).pageX,y:B(o).pageY}:{x:o.pageX,y:o.pageY};l&&Z&&x(Z,q)>2&&(h(R,o),R.$34b=l,R.$35b=l.$18b)}},handleWindowTouchMove:function(o){o.preventDefault();var R=this,h=R.$11b,p=R.$34b,q=R.$35b,N=R.$30b;if(N&&p){var c=i(o)?{x:B(o).pageX,y:B(o).pageY}:{x:o.pageX,y:o.pageY},C=c.y-N.y;C>0?h.scrollUp(p,p.$18b-(q-C)):h.scrollDown(p,q-C-p.$18b)}},handleWindowMouseMove:function(z){this.handleWindowTouchMove(z)},$10b:function(T,G){T.preventDefault();for(var k=this,r=k.getView().children,Z=_,p=0;p<r.length;p++){var m=r[p];if(m.contains(T.target)){Z=m;break}}if(Z){var d=this.$11b,H=d.getRowHeight();Math.abs(G)>.05&&(G>0?d.scrollUp(Z,G*H):0>G&&d.scrollDown(Z,-G*H))}},handle_mousewheel:function(k){this.$10b(k,k.wheelDelta/40)},handle_DOMMouseScroll:function(X){this.$10b(X,-X.detail)},$44b:function(B){this.getView().contains(B.target)||this.$11b.hide()},$41b:function(A){N.preventDefault(A)},$4b:function(F,s){var h=this.$11b;if(s=s||h._items,s&&s.length&&F.keyCode){var j=[F.keyCode];F.shiftKey&&j.push(16),F.ctrlKey&&j.push(17),F.altKey&&j.push(18),/mac/.test(n.navigator?n.navigator.userAgent.toLowerCase():"")?F.metaKey&&j.push(17):F.metaKey&&j.push(91),j.sort();var v=j.join(),L=h.$17b(s,function(H){if(H.key){var S=H.key.slice(0);return S.sort(),v===S.join()}});if(L){L.preventDefault!==!1&&F.preventDefault();var X=!1;L.disabled instanceof Function?X=L.disabled.call(h,L):L.disabled===!0&&(X=!0),X||h.$1b(L,F)}}},$39b:function(U){this.$32b=a(U)},$38b:function(y){if(N.preventDefault(y),!W(y)){var S=this;S._showContextMenu=l(y),S._showContextMenu||(S.$31b=a(y),S.$33b=Z(function(){S._showContextMenu=!0,delete S.$33b},600))}},$40b:function(m){var d=this;d._showContextMenu&&(l(m)?d.$11b.show(m):d.$31b&&(d.$32b?x(d.$31b,d.$32b)<10&&d.$11b.show(m):d.$11b.show(m))),d.$33b!=_&&(O(d.$33b),delete d.$33b),delete d.$31b,delete d.$32b}}),X.widget.ContextMenu=function(K){var T=this,X=T._view=g.createView(null,T);X[p]="ht-widget-contextmenu",T.setItems(K),T.$13b=new S(T),P(X,"font",N.contextMenuLabelFont),P(X,Q,z),P(X,"cursor","default"),P(X,"-webkit-"+s,b),P(X,"-moz-"+s,b),P(X,"-ms-"+s,b),P(X,s,b),P(X,"box-sizing","border-box"),P(X,"-moz-box-sizing","border-box"),N.baseZIndex!=_&&P(X,"z-index",E(N.baseZIndex)+2+""),T.$3b=function(d){T.$13b.$4b(d)}},Y("ContextMenu",c,{$16b:_,$5b:0,_items:_,$21b:_,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var z=this,t=z._enableGlobalKey;t===!1&&(m(H(),"keydown",z.$3b),z._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,I(H(),"keydown",this.$3b)},setItems:function(q){this._items=q},getItems:function(){return this._items},getVisibleFunc:function(){return this.$16b},setVisibleFunc:function(S){this.$16b=S},setLabelMaxWidth:function(x){this.$43b=x},$1b:function(s,v){var b=this;if("check"===s.type)s.selected=!s.selected;else if("radio"===s.type){var E=s.groupId;b.$17b(b._items,function(X){X.groupId===E&&(X.selected=!1)}),s.selected=!0}if(b.hide(),s.action)s.action.apply(s.scope||b,[s,v]);else if(s.href){var R=s.linkTarget||"_self";n.open(s.href,R)}},getItemById:function(G){return this.getItemByProperty("id",G)},setItemVisible:function(w,m){var d=this.getItemById(w);d&&(d.visible=m)},getItemByProperty:function(d,j,$){var R=this;if($=$||R._items,!$||0===$.length)return _;var K=R.$17b($,function(k){return k[d]===j});return K||_},scrollUp:function($,h){var i=this;if(h=h==_?20:h,h=E(h),0!==h){var f=0;$.$18b>h&&(f=$.$18b-h),i.$42b($,f),$.scrollTop=f,$.$18b=f}},scrollDown:function(R,D){var u=this;if(D=D==_?20:D,D=E(D),0!==D){var p=R.$22b,O=R.$23b,j=p-O;O+R.$18b+D<p&&(j=R.$18b+D),u.$42b(R,j),R.scrollTop=j,R.$18b=j}},$42b:function(H,J){J=J==_?H.$18b:J;var T=H.$24b,U=H.$25b;T&&(P(T,"top",J+t),0==J?P(T,K,b):P(T,K,"block")),U&&(P(U,"bottom",-J+t),J==H.$22b-H.$23b?P(U,K,b):P(U,K,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(G,W){for(var t=0;t<G.length;t++){var Z=G[t];if(W(Z))return Z;if(Z.items){var e=this.$17b(Z.items,W);if(e)return e}}},$2b:function(v,x){for(var Z=this,i=0;i<v.length;i++){Z.$5b++;var M=v[i];if(M.visible!==!1)if(N.isFunction(M.visible)&&M.visible()===!1)this._clearItemId(M);else if(!Z.$16b||Z.$16b.call(Z,M)){var s=T("li"),d=Z.$5b+"";if(P(s,"white-space","nowrap"),P(s,K,"block"),"separator"===M||M.separator===!0){var j=R();j[p]="separator",P(j,G,N.contextMenuSeparatorWidth+t),P(j,"background",N.contextMenuSeparatorColor),F(s,j)}else{M._id=d,s.setAttribute("data-id",d);var k=T("span"),S=T("span"),A=$(),_=R();if(P(k,K,"inline-block"),P(k,G,"1.2em"),P(S,K,"inline-block"),P(S,G,"1.2em"),P(S,"line-height","1.2em"),A[p]="prefix",P(A,K,"inline-block"),P(A,u,"1em"),P(A,G,"1em"),P(A,"vertical-align","middle"),P(A,y,"0 0.2em"),"check"===M.type&&M.selected?A[p]+=" check-prefix":"radio"===M.type&&M.selected&&(A[p]+=" radio-prefix"),F(s,A),M.icon){var O=$();O[p]="contextmenu-item-icon",P(O,K,"inline-block"),P(O,G,"1.2em"),P(O,u,"1.2em"),P(O,"margin-right","0.2em"),P(O,"float","left"),O.$50b=M.icon,O._item=M,F(k,O)}if(S[r]=M.label,F(k,S),F(s,k),_[p]="suffix",P(_,K,"inline-block"),P(_,"margin-left","1em"),P(_,"margin-right","0.4em"),P(_,"text-align","right"),P(_,"font-size","75%"),M.items&&(_[r]=N.contextMenuSubmenuMark),M.suffix&&(_[r]=M.suffix),F(s,_),s[p]="menu-item menu-item"+d,null!=M.background?M.background instanceof Function?P(s,"background-color",M.background.call(Z,M)):P(s,"background-color",M.background):P(s,"background-color",N.contextMenuBackground),P(s,"color",N.contextMenuLabelColor),P(s,o,"3px 0"),M.disabled instanceof Function){var L=M.disabled.call(Z,M);L&&(s[p]+=" disabled",P(s,"color",N.contextMenuDisabledLabelColor))}else M.disabled&&(s[p]+=" disabled",P(s,"color",N.contextMenuDisabledLabelColor));if(M.items){Z.$21b||(Z.$21b=new X.List);var h=T("ul");h[p]="submenu"+d,h.$45b=d,P(h,V,"hidden"),P(h,Q,z),F(Z._view,h),Z.$21b.add(h),Z.$2b(M.items,h)}}F(x,s)}else this._clearItemId(M);else this._clearItemId(M)}},rebuild:function(){var O=this,c=O._items,N=O._view;if(N&&(N[r]="",O.$21b=_,O.$5b=0,O.$19b=_,O.$20b=_,N.$26b=_,c&&0!==c.length)){var z=T("ul",O._r);F(N,z),O.$2b(c,z)}},addTo:function(w){if(w){var l=this,t=l.$13b;l.$12b=w,l.$9b=function(D){t.$44b(D)};var h=l.$6b=function(V){t.$38b(V)},r=l.$7b=function(n){t.$39b(n)},Q=l.$8b=function(u){t.$40b(u)};N.mockTouch&&(m(w,"touchstart",h,!0),m(w,"touchmove",r),m(w,"touchend",Q)),m(w,"mousedown",h,!0),m(w,"mousemove",r),m(w,"mouseup",Q),l.$27b=function(K){t.$41b(K)},m(w,"contextmenu",l.$27b)}},showOnView:function(f,O,q){f=f.getView?f.getView():f;var J=N.getWindowInfo(),y=f.getBoundingClientRect();this.show(y.left+J.left+O,y.top+J.top+q)},show:function(V,n,T){var X=this,T=T==_?!0:!1,D=X._view;if(D){if(X.invalidate(),1===arguments.length){var U=V;if(i(U)){var M=B(U);V=M.pageX,n=M.pageY}else V=U.pageX,n=U.pageY}var h=N.getWindowInfo(),Z=h.width,O=h.height,$=h.left,c=h.top,k={pageX:V,pageY:n,clientX:V-$,clientY:n-c,target:1,originEvent:U},E=k.clientX,x=k.clientY,b=function(k){k.style.height=O-6+t;var C=R(),h=R(),g=function(y){P(y,Q,z),P(y,"text-align","center"),P(y,u,"100%"),P(y,"font-size",10+t),P(y,"padding","2px 0"),P(y,"border","0px solid "+N.contextMenuScrollerBorderColor),P(y,"background-color",N.contextMenuScrollerColor1),y.style.backgroundImage="-webkit-linear-gradient(top, "+N.contextMenuScrollerColor1+", "+N.contextMenuScrollerColor2+")",y.style.backgroundImage="linear-gradient(to bottom, "+N.contextMenuScrollerColor1+", "+N.contextMenuScrollerColor2+")"};C[p]="menu-arrow-item menu-arrow-item-top",h[p]="menu-arrow-item menu-arrow-item-bottom",g(C),P(C,"top",J),P(C,"left",J),P(C,"border-bottom-width",1+t),C[r]="▲",g(h),P(h,"bottom",J),P(h,"left",J),P(h,"border-top-width",1+t),h[r]="▼",k.$24b=C,k.$25b=h,k.$18b=k.scrollTop,k.$22b=k.scrollHeight,k.$23b=k.clientHeight,F(k,C),F(k,h),X.$42b(k)};X.beforeShow&&X.beforeShow(k);var G=X._items;if(G&&(U&&U.preventDefault(),G.length)){X.rebuild(),N.appendToScreen(D),D.$26b=A(D,".menu-item");var j=D.children[0];j.offsetHeight>O&&b(j);var C=x+(T?1:0),q=E+(T?1:0),y=function(R){for(var T=0,h=0,g=0,i=X.$43b;g<R.children.length;g++){var l=R.children[g];if(l.getAttribute("data-id")){var p=l.children[1],_=l.children[2],j=p.children;if(i){var q=j[0];j.length>1&&(q=j[1]),q.offsetWidth>i&&(q[r]="<marquee scrollamount='3'>"+q[r]+"</marquee>",q.children[0].style.verticalAlign="text-bottom",P(q,u,i+t),P(q,K,"inline-block"))}var e=p.offsetWidth,H=_.offsetWidth;e>T&&(T=e),H>h&&(h=H)}}for(g=0;g<R.children.length;g++){var l=R.children[g];if(l.getAttribute("data-id")){var p=l.children[1],_=l.children[2],w=p.children[0],y=p.children[1];!y&&w.style.width&&P(w,u,T+t),P(p,u,T+t),P(_,u,h+t)}}};y(j);var Y=x+3+D.offsetHeight,W=E+3+D.offsetWidth;Y>O?P(D,w,C-(Y-O)+c+t):P(D,w,C+c+t),W>Z?P(D,f,q-(W-Z)+$+t):P(D,f,q+$+t);var L=X.$21b;L&&L.each(function(X){y(X),X.offsetHeight>O&&b(X)}),X.$9b&&(N.mockTouch&&m(H(),"touchstart",X.$9b,!0),m(H(),"mousedown",X.$9b,!0)),X.afterShow&&X.afterShow(k),X.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=_:!1},getRelatedView:function(){return this.$12b},hide:function(){var i=this,t=i._view;t&&t.parentNode&&(e(t.parentNode,t),N.mockTouch&&I(H(),"touchstart",i.$9b,!0),I(H(),"mousedown",i.$9b,!0),i.afterHide&&i.afterHide())},dispose:function(){var C=this,n=C.$12b,s=C._view;s&&(this.hide(),C.disableGlobalKey(),n&&(N.mockTouch&&(I(n,"touchstart",C.$6b,!0),I(n,"touchmove",C.$7b),I(n,"touchend",C.$8b)),I(n,"mousedown",C.$6b,!0),I(n,"mousemove",C.$7b),I(n,"mouseup",C.$8b),I(n,"contextmenu",C.$27b)),C._view=C._items=C.$21b=C.$19b=C.$12b=C.beforeShow=C.afterShow=C.afterHide=C.$9b=C.$3b=C.$6b=C.$7b=C.$8b=C.$27b=_)},$46b:function(W,i,u,t,R){var z=g.initContext(W);g.translateAndScale(z,0,0,1),z.clearRect(0,0,u,t),N.drawStretchImage(z,N.getImage(i),"fill",0,0,u,t,R,this),z.restore()},$47b:function(){var d,V,e,l=this,q=l._view;if(l.isShowing()){var T=A(q,".check-prefix");for(e=0;e<T.length;e++){var U=T[e];d=U.clientWidth,V=U.clientHeight,U.$48b=d,U.$49b=V,g.setCanvas(U,d,V)}var K=A(q,".radio-prefix");for(e=0;e<K.length;e++){var I=K[e];d=I.clientWidth,V=I.clientHeight,I.$48b=d,I.$49b=V,g.setCanvas(I,d,V)}var m=A(q,".contextmenu-item-icon");for(e=0;e<m.length;e++){var f=m[e];d=f.clientWidth,V=f.clientHeight,f.$48b=d,f.$49b=V,g.setCanvas(f,d,V)}}},validateImpl:function(){var Q,S,J,I=this,s=I._view;if(I.isShowing()){var m=A(s,".check-prefix");for(J=0;J<m.length;J++){var k=m[J];Q=k.$48b,S=k.$49b,Q&&S&&I.$46b(k,N.contextMenuCheckIcon,Q,S)}var _=A(s,".radio-prefix");for(J=0;J<_.length;J++){var u=_[J];Q=u.$48b,S=u.$49b,Q&&S&&I.$46b(u,N.contextMenuRadioIcon,Q,S)}var Y=A(s,".contextmenu-item-icon");for(J=0;J<Y.length;J++){var E=Y[J];Q=E.$48b,S=E.$49b,Q&&S&&I.$46b(E,N.getImage(E.$50b),Q,S,E._item)}}},_clearItemId:function(q){var l=this;delete q._id,q.items&&q.items.forEach(function(q){l._clearItemId(q)})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
!function(B,G){"use strict";var T="ht",i=T+".graph.",d=B[T],b=d.graph,v=d.Default,N=d.Color,w=null,X="px",C=v.getInternal(),t=C.getPinchDist,S=v.preventDefault,K=v.getTouchCount,D=v.startDragging;C.addMethod(v,{overviewBackground:N.widgetBackground,overviewMaskBackground:N.transparent,overviewContentBorderColor:N.widgetBorder,overviewContentBackground:N.background},!0),b.Overview=function(P){var p=this,Z=p._view=C.createView(1,p);p._canvas=C.createCanvas(Z),Z.style.background=v.overviewBackground,Z.appendChild(p._mask=C.createDiv()),p.setGraphView(P),p.addListeners()},v.def(i+"Overview",G,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:v.overviewMaskBackground,_contentBorderColor:v.overviewContentBorderColor,_contentBackground:v.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(l){var U=this;if(U.gv!==l){var p=U.gv;U.gv=l,p&&(p.removeViewListener(U.handleGraphViewChanged,U),p.ump(U.handleGraphViewPropertyChanged,U)),l&&(l.addViewListener(U.handleGraphViewChanged,U),l.mp(U.handleGraphViewPropertyChanged,U)),U.fp("graphView",p,l),U.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(B){this._autoUpdate&&"validate"===B.kind&&this.redraw()},handleGraphViewPropertyChanged:function(j){("canvasBackground"===j.property||this.getFixToRect()&&("zoom"===j.property||"translateX"===j.property||"translateY"===j.property))&&this.redraw()},redraw:function(){var K=this;K._redraw||(K._redraw=1,K.iv(50))},validateImpl:function(){var M=this,f=M.gv,Z=M._canvas,U=M.getWidth(),t=M.getHeight(),$=M._redraw;if(f){var o=M._mask,L=o.style,E=f.getViewRect(),r=this.getFixToRect(),G=r?"boolean"==typeof r?f.getContentRect():r:f.getScrollRect(),m=G.x,Q=G.y,S=G.width,W=G.height,B=M._rate=Math.max(S/U,W/t),g=M._x=(U-S/B)/2,c=M._y=(t-W/B)/2;if(0!==E.width&&0!==E.height||M.hasRetry||(v.callLater(M.iv,M,w),M.hasRetry=!0),(U!==Z.clientWidth||t!==Z.clientHeight)&&(C.setCanvas(Z,U,t),$=1),C.isSameRect(G,M._scrollRect)||(M._scrollRect=G,$=1),$){var k=C.initContext(Z),A=f.getDataModel(),u=A.getBackground()||M._contentBackground,e=M._contentBorderColor,F=v.devicePixelRatio;k.clearRect(0,0,U*F,t*F);var P=A.getBackground()&&A.a("width")>0&&A.a("height")>0;u&&!P&&C.fillRect(k,g*F,c*F,S/B*F,W/B*F,u),C.translateAndScale(k,-m/B+g,-Q/B+c,1/B),f._42(k),k.restore(),e&&C.drawBorder(k,e,g*F,c*F,S/B*F,W/B*F)}L.background=M._maskBackground,L.left=g+(E.x-m)/B+X,L.top=c+(E.y-Q)/B+X,L.width=E.width/B+X,L.height=E.height/B+X,M._redraw=null}else if($){var k=C.initContext(Z);k.clearRect(0,0,U,t),k.restore(),M._redraw=null}},center:function($){var R=this,L=R.gv;if(L){var q=L._zoom,d=L._29I,C=R._rate,h=R._scrollRect,K=v.getLogicalPoint($,R._canvas),e=h.x+(K.x-R._x)*C,g=h.y+(K.y-R._y)*C;L.setTranslate((d.width/2-e)*q,(d.height/2-g)*q)}},handle_mousedown:function(w){this.handle_touchstart(w)},handleWindowMouseUp:function(w){this.handleWindowTouchEnd(w)},handleWindowMouseMove:function(o){this.handleWindowTouchMove(o)},handle_mousewheel:function(s){this.handleScroll(s,s.wheelDelta)},handle_DOMMouseScroll:function(c){2===c.axis&&this.handleScroll(c,-c.detail)},handleScroll:function(b,o){if(S(b),this.gv){var Z=this.gv;o>0?Z.scrollZoomIn():0>o&&Z.scrollZoomOut()}},handle_touchstart:function(e){if(S(e),this.gv&&v.isLeftButton(e)){var O=this,N=O.gv,L=K(e);1===L?v.isDoubleClick(e)&&N.isResettable()?N.reset():(O.center(e),D(O,e)):2===L&&(O._dist=t(e),D(O,e))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(D){if(this.gv){var d=this,s=d._dist,J=K(D);1===J?d.center(D):2===J&&s!=w&&d.gv.handlePinch(w,t(D),s)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
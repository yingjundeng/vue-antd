!function(Q){"use strict";var A="ht",D=Q[A],Z=D.Default,K=Math,y=(K.PI,K.sin,K.cos,K.atan2,K.sqrt,K.max),R=K.floor,o=(K.round,K.ceil),l=D.Shape,q=(D.Edge,D.List),_=D.Style,k=D.graph,c=Z.getInternal(),E=c.ui(),g=null,z="prototype",L=Q.clearInterval,e=Q.setInterval,x=function(r){var d=r.data,p=this.dm();if(d&&"add"===r.kind){var H=p.$1c,c=d instanceof l?"shape.":"edge.";H&&d.s(c+"dash.flow")&&H.indexOf(d)<0&&H.push(d)}"clear"===r.kind&&(p.$1c=[])},d=function(m){var O=m.property,M=m.data,V=m.newValue,d=this.dm().$1c,k=M instanceof l?"s:shape.dash.flow":"s:edge.dash.flow";if(d&&O===k)if(V)d.indexOf(M)<0&&d.push(M);else for(var o=d.length,D=0;o>D;D++)if(d[D]===M){d.splice(D,1);break}},i=k.GraphView[z],F=E.EdgeUI[z],u=E.ShapeUI[z],a=u._80o,Y=F._80o,N=D.DataModel[z],P=N.prepareRemove,V=i.setDataModel;_["edge.dash.flow.step"]==g&&(_["edge.dash.flow.step"]=3),_["shape.dash.flow.step"]==g&&(_["shape.dash.flow.step"]=3),N.prepareRemove=function(L){P.call(this,L);var h=L._dataModel,m=h.$1c;if(m)for(var A=m.length,g=0;A>g;g++)if(m[g]===L){m.splice(g,1);break}},i.setDataModel=function(g){var f=this,s=f._dataModel;if(s!==g){s&&(s.umm(x,f),s.umd(d,f),s.$1c=[]),g.mm(x,f),g.md(d,f);var M=g.$1c=[];g.each(function(r){var q=r instanceof l?"shape.":"edge.";r.s(q+"dash.flow")&&M.indexOf(r)<0&&M.push(r)}),V.call(f,g)}},i.setDashFlowInterval=function(f){var h=this,y=h.$2c;h.$2c=f,h.fp("dashFlowInterval",y,f),h.$3c!=g&&(L(h.$3c),delete h.$3c,h.enableDashFlow(f))},i.getDashFlowInterval=function(){return this.$2c},i.$4c=function(){var f,k,v,r=this,p=r.tx(),i=r.ty(),Y=r._zoom,P=r.getWidth(),D=r.getHeight(),m={x:-p/Y,y:-i/Y,width:P/Y,height:D/Y},A=r.dm().$1c,C=r._56I,t=new q;if(A.forEach(function($){C[$.getId()]&&(f=r.getDataUI($),f&&(v=f._79o(),v&&t.add(v)))}),0!==t.size()&&(t.each(function(W){Z.intersectsRect(m,W)&&(k=Z.unionRect(k,W))}),k&&(k&&(Z.grow(k,y(1,1/Y)),k.x=R(k.x*Y)/Y,k.y=R(k.y*Y)/Y,k.width=o(k.width*Y)/Y,k.height=o(k.height*Y)/Y,k=Z.intersection(m,k)),k))){var s=r._canvas.getContext("2d");s.save(),s.lineCap=Z.lineCap,s.lineJoin=Z.lineJoin;var l=Z.devicePixelRatio,d=k.x,L=k.y,j=k.width,n=k.height;d=Math.floor((d*Y+p)*l),L=Math.floor((L*Y+i)*l),j=Math.ceil(j*Y*l)+1,n=Math.ceil(n*Y*l)+1,k.x=(d/l-p)/Y,k.y=(L/l-i)/Y,k.width=j/l/Y,k.height=n/l/Y,s.beginPath(),s.rect(d,L,j,n),s.clip(),s.clearRect(d,L,j,n),c.translateAndScale(s,p,i,Y),r.$5c(s,k),s.restore()}},i.$5c=function(P,Y){var d,O,C=this;C._93db(P),C.each(function(v){C._56I[v._id]&&(d=C.getDataUI(v),d&&(O=d._79o(),(!Y||Z.intersectsRect(Y,O))&&(d.$7c=!0,d._42(P),delete d.$7c)))}),C._92db(P)},i.enableDashFlow=function(C){var s=this;s.$3c==g&&(s.$3c=e(function(){s.$4c()},C||s.$2c||50))},i.disableDashFlow=function(){var W=this;L(W.$3c),delete W.$3c};var p=function(){var c=this,D=c._data,f=D instanceof l?"shape.":"edge.",R=D.s(f+"dash.pattern"),S=D.s(f+"dash.flow.reverse");if(R&&D.s(f+"dash")&&D.s(f+"dash.flow")&&c.$7c){var G=c.s(f+"dash.offset")||0,u=D.s(f+"dash.flow.step"),w=D.getStyleMap(),_=0;R.forEach(function(t){_+=t}),S&&(u=-u),G-=u,G%=_,w||(D._styleMap=w={}),w[f+"dash.offset"]=G}};F._80o=function(T){Y.call(this,T),p.call(this)},u._80o=function(c){a.call(this,c),p.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
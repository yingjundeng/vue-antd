!function(Q,P){"use strict";var $="ht",z=Q[$],N="innerHTML",T="className",g=null,f="px",x=z.Default,A=x.getInternal(),R="0",I=function(){return document},o=function(m){return I().createElement(m)},u=function(){return o("canvas")},L=function(t,W,j){t.style.setProperty(W,j,g)},W=function(t,g,C){x.def(z.widget[t],g,C)},c=function(P,e){P.appendChild(e)},M=function(c,D){c.removeChild(D)},q=A.addEventListener,V=A.removeEventListener,H=x.isTouchable,O=x.isTouchEvent;A.addMethod(x,{menuLabelFont:(H?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),z.widget.Menu=function(u){var d=this,Q=d._view=A.createView(null,d),G=d.$1g=new z.widget.ContextMenu,t=o("ul");G._r=!0,G._view[T]+=" ht-widget-dropdownmenu",Q[T]="ht-widget-menu",t[T]="header",L(Q,"margin",R),L(Q,"padding",R),L(Q,"background",x.menuBackground),L(Q,"-webkit-user-select","none"),L(Q,"-moz-user-select","none"),L(Q,"user-select","none"),L(Q,"text-align","left"),L(Q,"border-bottom",x.menuSeparatorWidth+"px solid "+x.menuSeparatorColor),L(Q,"cursor","default"),L(Q,"overflow","auto"),L(Q,"white-space","nowrap"),L(Q,"font",x.menuLabelFont),L(Q,"color",x.menuLabelColor),L(Q,"box-sizing","border-box"),L(Q,"-moz-box-sizing","border-box"),L(t,"list-style","none"),L(t,"margin",R),L(t,"padding",R),L(t,"display","inline-block"),c(Q,t),d.setItems(u),d.$2g=function(n){d.$3g(n)},d.$4g=function(T){d.$5g(T)},d.$6g=function(F){d.$7g(F)},d.$8g=function(E){d.$9g(E)},d.$9b=function(f){d.$10g(f)},d._autoShow=!0,d.setAutoShow(!1),G.afterHide=function(){d.$11g()},G.afterShow=function(){d.$12g()},V(I(),"keydown",G.$3b),d.$3b=function($){d.$13g($)},d.invalidate()},W("Menu",P,{_items:g,$14g:x.menuHoverBackground,$15g:x.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(G){var I=this;if(I.$21g=G,I.setItems(I._items),"largeicons"===G){for(var o=I._view.querySelectorAll(".header-item"),E=0,T=0;T<o.length;T++){var N=o[T];E=Math.max(E,N.clientWidth)}for(var T=0;T<o.length;T++){var N=o[T];L(N,"min-width",E+f)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(a){this.$22g=a;for(var P=this._view.querySelectorAll(".header-item"),_=0;_<P.length;_++){var p=P[_];L(p,"margin-left",a+f),L(p,"margin-right",a+f)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(V){this.$23g=V;for(var q=this._view.querySelectorAll(".header-item"),z=0;z<q.length;z++){var b=q[z];L(b,"margin-top",V+f),L(b,"margin-bottom",V+f)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(s){this.$24g=s,L(this._view,"text-align",s)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var R=this,Z=R._enableGlobalKey;Z===!1&&(q(I(),"keydown",R.$3b),R._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,V(I(),"keydown",this.$3b)},setHoverBackground:function(t){this.$14g=t},setHoverColor:function(R){this.$15g=R},setItems:function(Z){var O=this,B=O._view,z=O.$21g;if(O._items=Z,B.children[0][N]="",O.$16g={},Z&&Z.length){for(var K=B.children[0],g=0,h=I().createDocumentFragment();g<Z.length;g++){var X=Z[g],b=o("li"),i=o("span");if(X.icon){var M=u();M[T]="menu-item-icon","smallicons"===z?(L(M,"height","1.2em"),L(M,"width","1.2em"),L(M,"vertical-align","middle")):(L(M,"height","32px"),L(M,"width","32px"),L(M,"display","block"),L(M,"margin","0 auto")),M.$20g=X.icon,c(b,M)}b[T]="header-item",L(b,"display","inline-block"),L(b,"vertical-align","top"),L(b,"padding","0 1.2em"),L(b,"line-height","1.8em"),"largeicons"===z&&L(b,"text-align","center"),L(b,"background-color","rgba(0,0,0,0)"),b.setAttribute("data-index",g),O.$16g[g]=X.items,i[N]=X.label,"iconsonly"!==z&&c(b,i),c(h,b)}c(K,h)}},showDropdownMenu:function(X){var Z=this,z=Z.$16g[X],p=Z.$1g,a=Z._view.children[0].children[X],U=Z.$17g;if(a&&a!==U){U&&Z.hideDropdownMenu();var V=a.getBoundingClientRect(),d=x.getWindowInfo();Z.$17g=a,p.setItems(z),p.show(V.left+d.left,V.top+V.height+d.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(Y,M){var N=this,b=N._items;return b&&0!==b.length?N.$1g.getItemByProperty(Y,M,b):g},$12g:function(){var O=this,E=O.$17g;E.style.background=O.$14g,E.style.color=O.$15g,O._autoShow||q(I(),H?"touchstart":"mousedown",O.$9b)},$11g:function(){var T=this,x=T.$17g;x&&(x.style.background="",x.style.color="",T.$17g=g),V(I(),H?"touchstart":"mousedown",T.$9b)},$10g:function(m){var r=this,$=r._view,w=r.$1g,Q=$.children[0];!I().body.contains($)||Q.contains(m.target)||w._view.contains(m.target)||r.hideDropdownMenu()},$13g:function(Y){var w=this,k=w.$1g;I().body.contains(w._view)&&k.$13b.$4b.call(k.$13b,Y,w._items)},setAutoShow:function(T){var B=this,s=B.$1g,b=B._view;B._autoShow!==T&&(B._autoShow?(V(b,"mouseover",B.$2g),V(b,"mouseout",B.$4g),V(s._view,"mouseout",B.$4g),H||(q(b,"mouseover",B.$8g),q(b,"mouseout",B.$8g)),q(b,H?"touchstart":"mousedown",B.$6g)):(V(b,"mouseover",B.$8g),V(b,"mouseout",B.$8g),V(b,H?"touchstart":"mousedown",B.$6g),V(I(),H?"touchstart":"mousedown",B.$9b),H||(q(b,"mouseover",B.$2g),q(b,"mouseout",B.$4g),q(s._view,"mouseout",B.$4g))),B._autoShow=T)},$3g:function(S){var $=this,y=$._view.children[0],s=S.target;if(y!==s&&y.contains(s)){for(;"header-item"!==s[T];)s=s.parentNode;$.showDropdownMenu(s.getAttribute("data-index"))}},$5g:function(q){var d=this,y=d._view.children[0],b=d.$1g,Q=q.target,j=q.relatedTarget;!y.contains(Q)&&!b._view.contains(Q)||y.contains(j)||b._view.contains(j)||d.hideDropdownMenu()},$7g:function(i){i.preventDefault();var o=this,L=o._view.children[0],c=o.$1g,Q=i.target;if(x.isLeftButton(i)&&L!==Q&&L.contains(Q))if(O(i)){for(;"header-item"!==Q[T];)Q=Q.parentNode;var E=Q.getAttribute("data-index"),c=o.$1g,R=o._view.children[0].children[E],F=o.$17g;c.isShowing()&&o.hideDropdownMenu(),R!==F&&o.showDropdownMenu(E)}else if(c.isShowing())o.hideDropdownMenu();else{for(;"header-item"!==Q[T];)Q=Q.parentNode;o.showDropdownMenu(Q.getAttribute("data-index"))}},$9g:function(S){var j=this,W=j._view,f=j.$1g,U=S.target;if(W.contains(U)){for(var h=W.querySelectorAll(".header-item"),B=g,P=0;P<h.length;P++){var O=h[P];O.style.background="",O.style.color="","mouseover"===S.type?O.contains(U)&&(B=O):"mouseout"===S.type&&f.isShowing()&&j.$17g===O&&(B=O)}f.isShowing()&&(B||(B=j.$17g),j.showDropdownMenu(B.getAttribute("data-index"))),B&&(B.style.background=j.$14g,B.style.color=j.$15g)}},getShowingMenuIndex:function(){var F=this.$17g;return F?F.getAttribute("data-index"):-1},addTo:function(q){var o=this,N=o._view;c(q,N),o.invalidate()},dispose:function(){var C=this,d=C._view,q=C.$1g;d&&(C._autoShow?(V(d,"mouseover",C.$2g),V(d,"mouseout",C.$4g),V(q._view,"mouseout",C.$4g)):(V(d,"mouseover",C.$8g),V(d,"mouseout",C.$8g),V(d,H?"touchstart":"mousedown",C.$6g),V(I(),H?"touchstart":"mousedown",C.$9b)),V(I(),"keydown",C.$3b),q.dispose(),d.parentNode&&M(d.parentNode,d),C._view=C.$1g=C.$16g=C._items=C.$17g=C.$2g=C.$4g=C.$6g=C.$8g=C.$9b=C.$3b=g)},$19g:function(k,q,D,G){var R=A.initContext(k);A.translateAndScale(R,0,0,1),R.clearRect(0,0,D,G),x.drawStretchImage(R,x.getImage(q),"fill",0,0,D,G),R.restore()},validateImpl:function(){var d,w,f,y=this,r=y._view,_=r.querySelectorAll(".menu-item-icon");for(f=0;f<_.length;f++){var W=_[f];d=W.clientWidth,w=W.clientHeight,d&&w&&(A.setCanvas(W,d,w),y.$19g(W,x.getImage(W.$20g),d,w))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
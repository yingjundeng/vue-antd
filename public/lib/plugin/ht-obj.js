!function(o,O,A){"use strict";function a(){var I=[],N=[];return function(){return 0===arguments.length?N.join("")+p.apply(String,I):(I.length+arguments.length>1024&&(N.push(p.apply(String,I)),I.length=0),Array.prototype.push.apply(I,arguments),void 0)}}function l(z,b,S,J,Q){var W,m,K=8*Q-J-1,R=(1<<K)-1,P=R>>1,D=-7,N=S?Q-1:0,w=S?-1:1,u=z[b+N];for(N+=w,W=u&(1<<-D)-1,u>>=-D,D+=K;D>0;W=256*W+z[b+N],N+=w,D-=8);for(m=W&(1<<-D)-1,W>>=-D,D+=J;D>0;m=256*m+z[b+N],N+=w,D-=8);if(0===W)W=1-P;else{if(W===R)return m?0/0:1/0*(u?-1:1);m+=Math.pow(2,J),W-=P}return(u?-1:1)*m*Math.pow(2,W-J)}var B="ht",k=o[B],v=null,E=Math,Z=E.abs,q=E.max,Q=Number.MAX_VALUE,N=k.Default,G=N.getInternal(),Y=N.clone,u=G.vec3TransformMat4,f=[0,0],J=G.appendArray,D=function(){function O(i,h,H,b){if(i){var B=i[b];if(B){H.ignoreColor||(h.color=B.kd),!H.ignoreTransparent&&B.d>0&&B.d<1&&(h.transparent=!0,h.opacity=B.d);var G;if(!H.ignoreImage&&(G=B.map_kd)){G=G.split(" ");for(var C=-1,s=0;s<G.length;s++)"-o"===G[s]?(h.uvOffset=[parseFloat(G[s+1]),parseFloat(G[s+2])],s+=3,C=s):"-s"===G[s]&&(h.uvScale=[parseFloat(G[s+1]),parseFloat(G[s+2])],s+=3,C=s);h.image=(H.prefix||"")+G.splice(C+1).join(" ")}}}}var I=/v( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,X=/vt( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,g=/vn( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,P=/^[og]\s*(.+)?/,t=function(m,F){return F=parseInt(F),F>=0?m[F-1]:m[F+m.length]},U=function(h,O,A,U,v){if(h.lvs){var S=t(O,U),L=t(O,v),V=A.matrix,z=h.lvs;V?(J(z,u(Y(S),V)),J(z,u(Y(L),V))):(J(z,S),J(z,L))}},$=function(l,v,N,e,Q,C){if(l.vs){var G=t(v,e),B=t(v,Q),D=t(v,C),W=N.matrix,d=l.vs;if(N.flipFace){var p=B;B=D,D=p}W?(J(d,u(Y(G),W)),J(d,u(Y(B),W)),J(d,u(Y(D),W))):(J(d,G),J(d,B),J(d,D))}},H=function(P,s,D,W,n,l){if(P.vs){var C=D.flipY,o=W===A?f:t(s,W),H=n===A?f:t(s,n),M=l===A?f:t(s,l);if(D.flipFace){var O=H;H=M,M=O}P.uv.push(o[0],C?1-o[1]:o[1],H[0],C?1-H[1]:H[1],M[0],C?1-M[1]:M[1])}},R=function(M,b,K,i,z,y){if(M.vs){var c=t(b,i),w=t(b,z),k=t(b,y),S=K.normalMatrix,h=M.ns;if(K.flipFace){var F=w;w=k,k=F}S?(J(h,u(Y(c),S)),J(h,u(Y(w),S)),J(h,u(Y(k),S))):(J(h,c),J(h,w),J(h,k))}},F=function(Q,i,e,d){for(var p=d.length-1,a=0;p>a;++a)U(Q,i,e,d[a],d[a+1]);U(Q,i,e,d[p],d[0])},o=function(Z,b,u,l,d,s,h,g){var B=l&&l.length&&g;s[3]===A?($(Z,b,d,s[0],s[1],s[2]),h?H(Z,u,d,h[0],h[1],h[2]):Z.uv&&Z.uv.length&&H(Z,u,d),B&&R(Z,l,d,g[0],g[1],g[2])):($(Z,b,d,s[0],s[1],s[3]),$(Z,b,d,s[1],s[2],s[3]),h?(H(Z,u,d,h[0],h[1],h[3]),H(Z,u,d,h[1],h[2],h[3])):Z.uv&&Z.uv.length&&(H(Z,u,d),H(Z,u,d)),B&&(R(Z,l,d,g[0],g[1],g[3]),R(Z,l,d,g[1],g[2],g[3])))},L=function(o,x,H,$){var Y,E,D,T,M,p,t,w,i=Q,P=Q,B=Q,L=-Q,l=-Q,O=-Q;for(Y in o)for(p=o[Y].vs,w=p.length,E=0;w>E;E+=3)D=p[E+0],T=p[E+1],M=p[E+2],i>D&&(i=D),P>T&&(P=T),B>M&&(B=M),D>L&&(L=D),T>l&&(l=T),M>O&&(O=M);var U;if(H){var S=i+(L-i)/2,d=P+(l-P)/2,X=B+(O-B)/2;for(Y in o){for(p=o[Y].vs,w=p.length,E=0;w>E;E+=3)p[E+0]-=S,p[E+1]-=d,p[E+2]-=X;if(t=o[Y].lvs)for(w=t.length,E=0;w>E;E+=3)t[E+0]-=S,t[E+1]-=d,t[E+2]-=X}U=[S,d,X]}var g,s,e;H?(g=L-i,s=l-P,e=O-B):(g=2*q(Z(i),Z(L)),s=2*q(Z(P),Z(l)),e=2*q(Z(B),Z(O))),0===g&&(g=Math.min(s,e)/1e3||.001),0===s&&(s=Math.min(g,e)/1e3||.001),0===e&&(e=Math.min(g,s)/1e3||.001),$.rawS3=[g,s,e];for(Y in o){if(p=o[Y].vs,t=o[Y].lvs,x){for(w=p.length,E=0;w>E;E+=3)g&&(p[E+0]/=g),s&&(p[E+1]/=s),e&&(p[E+2]/=e);if(t)for(w=t.length,E=0;w>E;E+=3)g&&(t[E+0]/=g),s&&(t[E+1]/=s),e&&(t[E+2]/=e);var R=o[Y].ns;if(R){w=R.length;var c=new k.Math.Vector3;for(E=0;w>E;E+=3)c.set(R[E+0]*g,R[E+1]*s,R[E+2]*e).normalize(),R[E+0]=c.x,R[E+1]=c.y,R[E+2]=c.z}}o[Y].rawS3=$.rawS3,U&&(o[Y].center=U)}};return function(M,D,d){if(!M)return v;(G.isString(D)||D instanceof ArrayBuffer)&&(D=T(D)),d||(d={}),d.flipY==v&&(d.flipY=!0),(d.s3||d.r3||d.t3||d.mat)&&(d.matrix=G.createWorldMatrix(d.mat,d.s3,d.r3,d.rotationMode,d.t3));var K,J,l,p,s=k.Style["wf.loadQuadWireframe"],Y=[],i=[],q=d.ignoreNormal?v:[],f=d.reverseFlipMtls,w={vs:[],uv:[],ns:q?[]:v},c={htdefault:w},H=new r(M),B="",j="";for(q&&d.matrix&&(d.normalMatrix=G.createNormalMatrix(d.matrix));null!=(J=H.stepNext());)if(J=J.trim(),0!==J.length&&"#"!==J.charAt(0))if(J.indexOf("\\")!==J.length-1){if(B&&(J=B+J,B=""),J.indexOf("#QNAN0")>=0&&(J=J.replace(/#QNAN0/gi,"0")),l=I.exec(J))Y.push([parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])]);else if(l=X.exec(J))i.push([parseFloat(l[1]),parseFloat(l[2])]);else if(q&&(l=g.exec(J)))d.flipFace?q.push([parseFloat(-l[1]),parseFloat(-l[2]),parseFloat(-l[3])]):q.push([parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])]);else if("f"===J[0]){var Q=J.split(/\s+/);if(Q.length<4)continue;var b,K,u,E=[],$=[],S=[];for(K=1,u=Q.length;u>K;K++)b=Q[K].split("/"),E.push(parseInt(b[0],10)),b.length>1&&b[1].length>0&&S.push(parseInt(b[1],10)),b.length>2&&b[2].length>0&&$.push(parseInt(b[2],10));for(K=0,u=E.length-2;u>K;K++)o(w,Y,i,q,d,[E[0],E[K+1],E[K+2]],S.length?[S[0],S[K+1],S[K+2]]:v,$.length?[$[0],$[K+1],$[K+2]]:v);s&&F(w,Y,d,E)}else if(d.part&&null!==(l=P.exec(J)))j=(" "+l[0].substr(1).trim()).substr(1);else if(/^usemtl /.test(J)){var V=J.substring(7).trim();V.split(" ").forEach(function(a){var U=d.part?j+"_"+a:a;(w=c[U])||(w=c[U]={name:U,vs:[],uv:[],ns:q?[]:v,lvs:s?[]:v},d.ignoreMtls&&d.ignoreMtls.indexOf(a)>=0&&delete w.vs,(d.reverseFlip||"*"===f||f&&f.indexOf(a)>=0)&&(w.reverseFlip=!0),O(D,w,d,a))})}}else B+=J.substring(0,J.length-1);var U=[];for(var R in c){var W=c[R].vs;if(W&&0!==W.length){var A=c[R].uv;if(A)for(var e=2*W.length/3-A.length;e-->0;)A.push(0)}else U.push(R)}U.forEach(function(G){delete c[G]}),L(c,d.cube,d.center,d);var t=d.shape3d;if(t){var _=[];for(var p in c){var w=c[p];_.rawS3=w.rawS3,w.center&&(_.center=w.center),_.push(w)}N.setShape3dModel(t,_)}return c}}(),T=function(p){var o={};if(p)for(var G,E,q,C,F,M,w=new r(p),W=/\s+/;null!=(E=w.stepNext());)E=E.trim(),0!==E.length&&"#"!==E.charAt(0)&&(q=E.indexOf(" "),C=(q?E.substring(0,q):E).toLowerCase(),F=(q?E.substring(q+1):"").trim(),"newmtl"===C?o[F]=G={name:F}:G&&("ka"===C||"kd"===C||"ks"===C?(M=F.split(W,3),G[C]=[parseFloat(M[0]),parseFloat(M[1]),parseFloat(M[2]),1]):G[C]="ns"===C||"d"===C?parseFloat(F):F));return o},r=function(W){var j=this;if(W instanceof ArrayBuffer){j.isBuffer=!0;var r=0,H=new Uint8Array(W),K=H.length,z=H.length;j.stepNext=function(){for(var p,y,P=r;K>r;)if(p=H[r],y=p>>4,12===y||13==y)r+=2;else if(14===y)r+=3;else if(r++,10===p)return String.fromCharCode.apply(null,H.subarray(P,r));return r>P?String.fromCharCode.apply(null,H.subarray(P,r)):null}}else{j.isBuffer=!1;var I=W.split("\n"),q=0,z=I.length;j.stepNext=function(){return z>q?I[q++]:null}}};r.prototype={},r.prototype.constructor=r,G.addMethod(N,{loadObj:function(M,x,y){y=y||{};var P=!1;/(MSIE |Trident\/|Edge\/)/.test(o.navigator.userAgent)&&(P=!0);var w=function(l){var V,k=y.finishFunc,x=y.shape3d,C=l?D(l[0],l[1],y):null;if(C){if(x)V=N.getShape3dModel(x);else{V=[];for(var g in C){var M=C[g];V.rawS3=M.rawS3,V.push(M)}}k&&k(C,V,V.rawS3)}else k&&k(null)};if(P){y.responseType="arraybuffer";var U=function(C){N.xhrLoad(M,function(V){w([V,C])},y)};x?N.xhrLoad(x,function(H){U(H)},y):U()}else N.xhrLoad(x?[M,x]:[M],w,y)},parseObj:function(A,L,w){return D(A,L,w)}});var z=k.ByteBuffer=function(L,c,H){if("undefined"==typeof L&&(L=z.DEFAULT_CAPACITY),"undefined"==typeof c&&(c=z.DEFAULT_ENDIAN),"undefined"==typeof H&&(H=z.DEFAULT_NOASSERT),!H){if(L=0|L,0>L)throw RangeError("Illegal capacity");c=!!c,H=!!H}this.buffer=0===L?$:new ArrayBuffer(L),this.view=0===L?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=L,this.littleEndian=c,this.noAssert=H},$=new ArrayBuffer(0);z.LITTLE_ENDIAN=!0,z.BIG_ENDIAN=!1,z.DEFAULT_CAPACITY=16,z.DEFAULT_ENDIAN=z.BIG_ENDIAN,z.DEFAULT_NOASSERT=!1,z.METRICS_BYTES="b";var p=String.fromCharCode,L=z.prototype;L.readUint8=function(U){var g="undefined"==typeof U;if(g&&(U=this.offset),!this.noAssert){if("number"!=typeof U||0!==U%1)throw TypeError("Illegal offset: "+U+" (not an integer)");if(U>>>=0,0>U||U+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+U+" (+"+1+") <= "+this.buffer.byteLength)}var B=this.view[U];return g&&(this.offset+=1),B},L.readUint16=function(V){var T="undefined"==typeof V;if(T&&(V=this.offset),!this.noAssert){if("number"!=typeof V||0!==V%1)throw TypeError("Illegal offset: "+V+" (not an integer)");if(V>>>=0,0>V||V+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+V+" (+"+2+") <= "+this.buffer.byteLength)}var p=0;return this.littleEndian?(p=this.view[V],p|=this.view[V+1]<<8):(p=this.view[V]<<8,p|=this.view[V+1]),T&&(this.offset+=2),p},L.readUint24=function(Y){var J="undefined"==typeof Y;if(J&&(Y=this.offset),!this.noAssert){if("number"!=typeof Y||0!==Y%1)throw TypeError("Illegal offset: "+Y+" (not an integer)");if(Y>>>=0,0>Y||Y+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+Y+" (+"+4+") <= "+this.buffer.byteLength)}var I=0;return this.littleEndian?(I=this.view[Y+2]<<16,I|=this.view[Y+1]<<8,I|=this.view[Y]):(I=this.view[Y+1]<<8,I|=this.view[Y+2],I+=this.view[Y]<<16>>>0),I|=0,J&&(this.offset+=3),I},L.readUint32=function(B){var p="undefined"==typeof B;if(p&&(B=this.offset),!this.noAssert){if("number"!=typeof B||0!==B%1)throw TypeError("Illegal offset: "+B+" (not an integer)");if(B>>>=0,0>B||B+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+B+" (+"+4+") <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[B+2]<<16,i|=this.view[B+1]<<8,i|=this.view[B],i+=this.view[B+3]<<24>>>0):(i=this.view[B+1]<<16,i|=this.view[B+2]<<8,i|=this.view[B+3],i+=this.view[B]<<24>>>0),p&&(this.offset+=4),i},L.readFloat32=function(g){var u="undefined"==typeof g;if(u&&(g=this.offset),!this.noAssert){if("number"!=typeof g||0!==g%1)throw TypeError("Illegal offset: "+g+" (not an integer)");if(g>>>=0,0>g||g+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+g+" (+"+4+") <= "+this.buffer.byteLength)}var i=l(this.view,g,this.littleEndian,23,4);return u&&(this.offset+=4),i};var h=function(){var d={};return d.MAX_CODEPOINT=1114111,d.decodeUTF8=function(r,z){for(var O,M,D,h,Q=function(Z){Z=Z.slice(0,Z.indexOf(null));var f=Error(Z.toString());throw f.name="TruncatedError",f.bytes=Z,f};null!==(O=r());)if(0===(128&O))z(O);else if(192===(224&O))null===(M=r())&&Q([O,M]),z((31&O)<<6|63&M);else if(224===(240&O))(null===(M=r())||null===(D=r()))&&Q([O,M,D]),z((15&O)<<12|(63&M)<<6|63&D);else{if(240!==(248&O))throw RangeError("Illegal starting byte: "+O);(null===(M=r())||null===(D=r())||null===(h=r()))&&Q([O,M,D,h]),z((7&O)<<18|(63&M)<<12|(63&D)<<6|63&h)}},d.UTF16toUTF8=function(t,s){for(var k,y=null;;){if(null===(k=null!==y?y:t()))break;k>=55296&&57343>=k&&null!==(y=t())&&y>=56320&&57343>=y?(s(1024*(k-55296)+y-56320+65536),y=null):s(k)}null!==y&&s(y)},d.UTF8toUTF16=function(d,g){var E=null;for("number"==typeof d&&(E=d,d=function(){return null});null!==E||null!==(E=d());)65535>=E?g(E):(E-=65536,g((E>>10)+55296),g(E%1024+56320)),E=null},d.decodeUTF8toUTF16=function(t,i){d.decodeUTF8(t,function(Q){d.UTF8toUTF16(Q,i)})},d.calculateCodePoint=function(P){return 128>P?1:2048>P?2:65536>P?3:4},d.calculateUTF8=function(K){for(var F,b=0;null!==(F=K());)b+=128>F?1:2048>F?2:65536>F?3:4;return b},d.calculateUTF16asUTF8=function(r){var w=0,H=0;return d.UTF16toUTF8(r,function(t){++w,H+=128>t?1:2048>t?2:65536>t?3:4}),[w,H]},d}();L.readString=function(m,D,E){"number"==typeof D&&(E=D,D=A);var y="undefined"==typeof E;if(y&&(E=this.offset),"undefined"==typeof D&&(D=z.METRICS_CHARS),!this.noAssert){if("number"!=typeof m||0!==m%1)throw TypeError("Illegal length: "+m+" (not an integer)");if(m|=0,"number"!=typeof E||0!==E%1)throw TypeError("Illegal offset: "+E+" (not an integer)");if(E>>>=0,0>E||E+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+E+" (+"+0+") <= "+this.buffer.byteLength)}var i,G=0,L=E;if(D===z.METRICS_CHARS){if(i=a(),h.decodeUTF8(function(){return m>G&&E<this.limit?this.view[E++]:null}.bind(this),function(u){++G,h.UTF8toUTF16(u,i)}),G!==m)throw RangeError("Illegal range: Truncated data, "+G+" == "+m);return y?(this.offset=E,i()):{string:i(),length:E-L}}if(D===z.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof E||0!==E%1)throw TypeError("Illegal offset: "+E+" (not an integer)");if(E>>>=0,0>E||E+m>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+E+" (+"+m+") <= "+this.buffer.byteLength)}var N=E+m;if(h.decodeUTF8toUTF16(function(){return N>E?this.view[E++]:null}.bind(this),i=a(),this.noAssert),E!==N)throw RangeError("Illegal range: Truncated data, "+E+" == "+N);return y?(this.offset=E,i()):{string:i(),length:E-L}}throw TypeError("Unsupported metrics: "+D)};var R=function(j){if(j){var e=new z(0);e.buffer=j,e.limit=j.byteLength,e.view=j.byteLength>0?new Uint8Array(j):null;var N=[];return x(N,e),K(N,e),W(N,e),N}},x=function(b,S){S.offset+=19},K=function(R,c){var s=c.readUint8();1&s&&(R.center=M(c)),2&s&&(R.rawS3=M(c))},F=function(s){return[s.readFloat32(),s.readFloat32()]},M=function(C){return[C.readFloat32(),C.readFloat32(),C.readFloat32()]},U=function(L){var d=L.readUint32();return L.readString(d,z.METRICS_BYTES)},W=function(A,f){for(var o=f.readUint8(),X=0;o>X;X++)A.push(n(f))},n=function(R){var O={},G=R.readUint32(),m=0,$=G&1<<m++,x=G&1<<m++,q=G&1<<m++,V=G&1<<m++,r=G&1<<m++,u=G&1<<m++,Q=G&1<<m++,g=G&1<<m++,o=G&1<<m++,v=G&1<<m++,h=G&1<<m++,Y=G&1<<m++;return($||x)&&t(O,R,3,"vs","lvs"),q&&t(O,R,2,"uv"),V&&t(O,R,3,"ns"),r&&(O.name=U(R)),u&&(O.color=M(R)),Q&&(O.transparent=!!R.readUint8()),g&&(O.opacity=R.readFloat32()),o&&(O.uvoffset=F(R)),v&&(O.uvScale=M(R)),h&&(O.image=U(R)),Y&&(O.reverseFlip=!!R.readUint8()),O},s=16383,g=function(o){var v=o.readUint16(),y=16384&v,h=32768&v,b=(v&s)/s,W=0;return h&&(W=o.readUint16()),(y?1:-1)*(W+b)},i=function(x){var y=x.readUint32(),A=y&1<<30,E=y&1<<29,M=y&1<<28,K=16383,m=(16383&y>>14)/K,z=(16383&y)/K,k=Math.sqrt(1-m*m-z*z)||0;return[m*(A?1:-1),z*(E?1:-1),k*(M?1:-1)]},t=function(U,q,w,Y,v){var N=q.readUint32();q.readUint8();var s,$,K,_=q.readUint32(),e=q.readUint32(),o=[];if("uv"===Y)for(s=0;N>s;s++)$=g(q),K=g(q),o.push([$,K]);else if("ns"===Y)for(s=0;N>s;s++)o.push(i(q));else for(var s=0;N>s;s++)o.push(M(q));var S;S=256>N?"readUint8":65536>N?"readUint16":16777216>N?"readUint24":"readUint32";var P,y,I;if(_)for(P=U[Y]=[],s=0;_>s;s++)y=q[S](),I=o[y],"uv"===Y?P.push(I[0],I[1]):P.push(I[0],I[1],I[2]);if(e)for(P=U[v]=[],s=0;e>s;s++)y=q[S](),I=o[y],P.push(I[0],I[1],I[2])};N.getInternal().addMethod(N,{loadBin:function(H,x){x=x||{};var D=function(f){var y,u=x.finishFunc,S=x.shape3d,H=f?R(f):null;if(H){if(S)y=N.getShape3dModel(S);else{y=[];for(var J in H){var A=H[J];y.rawS3=A.rawS3,y.push(A)}}u&&u(H,y,y.rawS3)}else u&&u(null)};x.responseType="arraybuffer",N.xhrLoad(H,function(G){D(G)},x)},parseBin:function(l){return R(l)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
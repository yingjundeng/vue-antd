!function(x){"use strict";function z(M){var R,o,p,B,q,b,U,j=[],Z=0;R=g.createDiv(),R.style.overflow="hidden";var F=M.getView();F.insertBefore(R,M.getCanvas()),o=L.Default.createDiv(),o.style.WebkitTransformStyle="preserve-3d",o.style.MozTransformStyle="preserve-3d",o.style.transformStyle="preserve-3d",R.appendChild(o),[{event:"mousedown",style:"none"},{event:"mouseup",style:"auto"},{event:"touchstart",style:"none"},{event:"touchend",style:"auto"}].forEach(function($){var c=$.style;X.addEventListener(F,$.event,function(){R.style.pointerEvents=c})}),this.updateWebView=function(){if(M.getWidth()&&M.getHeight()){var x=M.getCanvas(),e=1*x.style.width.slice(0,-2),E=1*x.style.height.slice(0,-2);(j[0]!==e||j[1]!==E)&&(j[0]=e,j[1]=E,R.style.width=e+"px",R.style.height=E+"px",o.style.width=e+"px",o.style.height=E+"px");var k=M._projectMatrix[5]*j[1]/2;k!==p&&(p=k,R.style.WebkitPerspective=p+"px",R.style.MozPerspective=p+"px",R.style.perspective=p+"px"),b="translateZ("+p+"px)"+u(M._viewMatrix);var n=b+"translate("+j[0]/2+"px,"+j[1]/2+"px)";B===n||q||(o.style.WebkitTransform=n,o.style.MozTransform=n,o.style.transform=n,B=n),Z++,U=!1,M.dm().each(function(n){n.isWebView&&_(n)});for(var i,Y=o.children,r=[],$=0,I=Y.length;I>$;$++)i=Y[$],i._isHtWebView&&i._renderCookie!==Z&&r.push(i);r.length&&r.forEach(function(Q){o.removeChild(Q)})}};var N=new Array(16),_=function(I){var l=I.getAttach();if(l){l.parentElement!==o&&o.appendChild(l),l._renderCookie=Z,U=!0;var W=I.getFinalScale3d(),A=I._prefrenceSize;A&&A[0]?A[1]||(A[1]=A[0]/W[0]*W[1]):A=[W[0],W[1]],l.style.width=A[0]+"px",l.style.height=A[1]+"px";var O=1/A[0],y=1/A[1],n=1,T=I.mat;N[0]=T[0]*O,N[1]=T[1]*O,N[2]=T[2]*O,N[3]=T[3]*O,N[4]=T[4]*y,N[5]=T[5]*y,N[6]=T[6]*y,N[7]=T[7]*y,N[8]=T[8]*n,N[9]=T[9]*n,N[10]=T[10]*n,N[11]=T[11]*n,N[12]=T[12],N[13]=T[13],N[14]=T[14],N[15]=T[15];var c=$(N,q?"translate("+j[0]/2+"px,"+j[1]/2+"px)"+b:""),G=l.$a2;G!==c&&(l.$a2=c,l.style.WebkitTransform=c,l.style.MozTransform=c,l.style.transform=c)}}}function v(M){return Math.abs(M)<1e-10?0:M}function u(V){var e=V;return"matrix3d("+v(e[0])+","+v(-e[1])+","+v(e[2])+","+v(e[3])+","+v(e[4])+","+v(-e[5])+","+v(e[6])+","+v(e[7])+","+v(e[8])+","+v(-e[9])+","+v(e[10])+","+v(e[11])+","+v(e[12])+","+v(-e[13])+","+v(e[14])+","+v(e[15])+")"}function $(l,i){var g=l,M="matrix3d("+v(g[0])+","+v(g[1])+","+v(g[2])+","+v(g[3])+","+v(-g[4])+","+v(-g[5])+","+v(-g[6])+","+v(-g[7])+","+v(g[8])+","+v(g[9])+","+v(g[10])+","+v(g[11])+","+v(g[12])+","+v(g[13])+","+v(g[14])+","+v(g[15])+")";return"translate(-50%,-50%)"+(i||"")+M}var J="ht",L=x[J],g=L.Default,X=g.getInternal(),M=X.superCall,w=L.graph3d.Graph3dView,o=w.prototype.validateImpl;w.prototype.validateImpl=function(){o.call(this);var _=this._webViewRenderer;_||(_=this._webViewRenderer=new z(this)),_.updateWebView()};var n=L.WebView3d=function(){var S=this;M(n,S),S.s({shape3d:"billboard","shape3d.reverse.flip":!0})},I=[1,1,1,1],f=[0,0,0,0];g.def(J+"."+"WebView3d",L.Node,{ms_ac:["attach"],isWebView:!0,attachDOM:function(K,d,N){if(!K)return this.detachDOM();if("string"==typeof K){var J=document.createElement("iframe");J.src=K,K=J}var s=K.style;s.position="absolute",s.border=0,s.outline=0,s.padding=0,s.margin=0,K._isHtWebView=!0,this.setAttach(K),this._prefrenceSize=[d,N],this.s("shape3d.blend",f)},detachDOM:function(){this.setAttach(null),this.s("shape3d.blend",this.getBgColor())},setBgColor:function(u){this.a("defaultBgColor",u),this.getAttach()||this.s("shape3d.blend",u)},getBgColor:function(){return this.a("defaultBgColor")||I}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);